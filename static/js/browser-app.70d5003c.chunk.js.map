{"version":3,"file":"static/js/browser-app.70d5003c.chunk.js","mappings":"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","sources":["ResourcesList/BrowserResourceSources.js","Utils/BrowserExternalWindowUtils.js","ResourcesList/BrowserResourceExternalEditors.js","ExportAndShare/BrowserExporters/BrowserS3PreviewLauncher/BrowserPreviewErrorDialog.js","Utils/GDevelopServices/Preview.js","ExportAndShare/BrowserExporters/BrowserS3FileSystem.js","GameEngineFinder/BrowserS3GDJSFinder.js","ExportAndShare/BrowserExporters/BrowserS3PreviewLauncher/BrowserPreviewDebuggerServer.js","ExportAndShare/BrowserExporters/BrowserS3PreviewLauncher/index.js","ExportAndShare/BrowserExporters/BrowserFileUploader.js","ExportAndShare/BrowserExporters/BrowserFileSystem.js","ExportAndShare/BrowserExporters/BrowserOnlineCordovaExport.js","ExportAndShare/BrowserExporters/BrowserOnlineCordovaIosExport.js","ExportAndShare/BrowserExporters/BrowserOnlineElectronExport.js","ExportAndShare/BrowserExporters/BrowserOnlineWebExport.js","ExportAndShare/BrowserExporters/BrowserHTML5Export.js","ExportAndShare/BrowserExporters/BrowserCordovaExport.js","ExportAndShare/BrowserExporters/BrowserElectronExport.js","ExportAndShare/BrowserExporters/BrowserFacebookInstantGamesExport.js","ExportAndShare/BrowserExporters/index.js","JsExtensionsLoader/BrowserJsExtensionsLoader.js","EventsFunctionsExtensionsLoader/CodeWriters/BrowserS3EventsFunctionCodeWriter.js","UI/CustomSvgIcons/GoogleDrive.js","ProjectsStorage/GoogleDriveStorageProvider/GoogleDriveFileOrFolderPicker.js","ProjectsStorage/GoogleDriveStorageProvider/GoogleDriveSaveAsDialog.js","ProjectsStorage/GoogleDriveStorageProvider/index.js","ProjectsStorage/DownloadFileStorageProvider/DownloadFileSaveAsDialog.js","ProjectsStorage/DownloadFileStorageProvider/index.js","ProjectsStorage/ResourceMover/BrowserResourceMover.js","ProjectsStorage/ResourceFetcher/BrowserResourceFetcher.js","EventsFunctionsExtensionsLoader/Storage/BrowserEventsFunctionsExtensionOpener.js","EventsFunctionsExtensionsLoader/Storage/BrowserEventsFunctionsExtensionWriter.js","LoginProvider/BrowserLoginProvider.js","BrowserApp.js"],"sourcesContent":["// @flow\nimport { t, Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport {\n  type ResourceSourceComponentProps,\n  type ResourceStorePrimaryActionProps,\n  type ResourceSource,\n  type ResourceStoreChooserProps,\n  allResourceKindsAndMetadata,\n  resourcesKindSupportedByResourceStore,\n} from './ResourceSource';\nimport { ResourceStore } from '../AssetStore/ResourceStore';\nimport path from 'path-browserify';\nimport { Line } from '../UI/Grid';\nimport { ColumnStackLayout, TextFieldWithButtonLayout } from '../UI/Layout';\nimport RaisedButton from '../UI/RaisedButton';\nimport SemiControlledTextField from '../UI/SemiControlledTextField';\nimport { useDebounce } from '../Utils/UseDebounce';\nimport axios from 'axios';\nimport AlertMessage from '../UI/AlertMessage';\nimport { FileToCloudProjectResourceUploader } from './FileToCloudProjectResourceUploader';\nimport {\n  extractDecodedFilenameWithExtensionFromPublicAssetResourceUrl,\n  isPublicAssetResourceUrl,\n} from '../Utils/GDevelopServices/Asset';\nimport { DialogPrimaryButton } from '../UI/Dialog';\n\nconst ResourceStoreChooser = ({\n  options,\n  selectedResourceIndex,\n  onSelectResource,\n}: ResourceStoreChooserProps) => {\n  if (!onSelectResource) return null;\n  const { resourceKind } = options;\n  if (!resourcesKindSupportedByResourceStore.includes(resourceKind)) {\n    return null;\n  }\n\n  return (\n    <ResourceStore\n      selectedResourceIndex={selectedResourceIndex}\n      onSelectResource={onSelectResource}\n      resourceKind={\n        // $FlowIgnore - Flow does not understand the check above restricts the resource kind.\n        resourceKind\n      }\n    />\n  );\n};\n\nexport const UrlChooser = ({\n  options,\n  onChooseResources,\n  createNewResource,\n}: ResourceStoreChooserProps) => {\n  const [inputValue, setInputValue] = React.useState('');\n  const [error, setError] = React.useState<?Error>(null);\n  const [urlsErroredBooleanArray, setUrlsErroredBooleanArray] = React.useState<\n    boolean[]\n  >([]);\n  const hasErroredUrls = !!urlsErroredBooleanArray.filter(Boolean).length;\n\n  const validateInputValue = useDebounce(async (inputValue: string) => {\n    const urls = options.multiSelection\n      ? inputValue.split('\\n').filter(Boolean)\n      : [inputValue];\n    setError(null);\n    setUrlsErroredBooleanArray([]);\n\n    try {\n      const responses = await Promise.all(\n        urls.map(async url => {\n          return await axios.get(url, {\n            timeout: 1000,\n            validateStatus: status => true,\n          });\n        })\n      );\n\n      setUrlsErroredBooleanArray(\n        responses.map(\n          response => !(response.status >= 200 && response.status < 400)\n        )\n      );\n    } catch (error) {\n      setError(error);\n    }\n  }, 500);\n\n  React.useEffect(\n    () => {\n      validateInputValue(inputValue);\n    },\n    [inputValue, validateInputValue]\n  );\n\n  return (\n    <ColumnStackLayout noMargin expand>\n      <Line noMargin>\n        <TextFieldWithButtonLayout\n          renderButton={style => (\n            <RaisedButton\n              onClick={() => {\n                if (!onChooseResources || !createNewResource) return;\n                const urls = options.multiSelection\n                  ? inputValue.split('\\n').filter(Boolean)\n                  : [inputValue];\n\n                onChooseResources(\n                  urls.map(url => {\n                    const newResource = createNewResource();\n                    newResource.setFile(url);\n                    newResource.setName(path.basename(url));\n                    newResource.setOrigin('url', url);\n\n                    return newResource;\n                  })\n                );\n              }}\n              primary\n              label={<Trans>Choose</Trans>}\n              style={style}\n              disabled={!!error || hasErroredUrls}\n            />\n          )}\n          renderTextField={() => (\n            <SemiControlledTextField\n              floatingLabelText={\n                options.multiSelection ? (\n                  <Trans>Resource(s) URL(s) (one per line)</Trans>\n                ) : (\n                  <Trans>Resource URL</Trans>\n                )\n              }\n              value={inputValue}\n              onChange={setInputValue}\n              multiline={options.multiSelection}\n              rows={1}\n              rowsMax={5}\n              fullWidth\n              errorText={\n                error ? (\n                  <Trans>\n                    There was an error verifying the URL(s). Please check they\n                    are correct.\n                  </Trans>\n                ) : hasErroredUrls ? (\n                  <Trans>\n                    Unable to verify URLs{' '}\n                    {urlsErroredBooleanArray\n                      .map((isErrored, index) => {\n                        if (isErrored) return '#' + (index + 1);\n                        return null;\n                      })\n                      .filter(Boolean)\n                      .join(', ')}\n                    . Please check they are correct.\n                  </Trans>\n                ) : null\n              }\n            />\n          )}\n        />\n      </Line>\n      <AlertMessage kind=\"warning\">\n        <Trans>\n          The URLs must be public and stay accessible while you work on this\n          project - they won't be stored inside the project file. When exporting\n          a game, the resources pointed by these URLs will be downloaded and\n          stored inside the game.\n        </Trans>\n      </AlertMessage>\n    </ColumnStackLayout>\n  );\n};\n\nconst browserResourceSources: Array<ResourceSource> = [\n  ...allResourceKindsAndMetadata.map(({ kind, createNewResource }) => ({\n    name: `upload-${kind}`,\n    displayName: t`File(s) from your device`,\n    displayTab: 'import',\n    kind,\n    renderComponent: (props: ResourceSourceComponentProps) => (\n      <FileToCloudProjectResourceUploader\n        createNewResource={createNewResource}\n        onChooseResources={props.onChooseResources}\n        options={props.options}\n        fileMetadata={props.fileMetadata}\n        getStorageProvider={props.getStorageProvider}\n        key={`url-chooser-${kind}`}\n        automaticallyOpenInput={!!props.automaticallyOpenIfPossible}\n      />\n    ),\n  })),\n  ...resourcesKindSupportedByResourceStore\n    .map(kind => {\n      const source = allResourceKindsAndMetadata.find(\n        resourceSource => resourceSource.kind === kind\n      );\n      if (!source) return null;\n      return {\n        name: `resource-store-${kind}`,\n        displayName: t`Choose from asset store`,\n        displayTab: 'standalone',\n        kind,\n        renderComponent: (props: ResourceSourceComponentProps) => (\n          <ResourceStoreChooser\n            selectedResourceIndex={props.selectedResourceIndex}\n            onSelectResource={props.onSelectResource}\n            options={props.options}\n            key={`resource-store-${kind}`}\n          />\n        ),\n        renderPrimaryAction: ({\n          resource,\n          onChooseResources,\n        }: ResourceStorePrimaryActionProps) => (\n          <DialogPrimaryButton\n            primary\n            key=\"add-resource\"\n            label={\n              kind === 'font' ? (\n                <Trans>Install font</Trans>\n              ) : (\n                <Trans>Add to project</Trans>\n              )\n            }\n            disabled={!resource}\n            onClick={() => {\n              if (!resource) return;\n              const chosenResourceUrl = resource.url;\n              const newResource = source.createNewResource();\n              newResource.setFile(chosenResourceUrl);\n              const resourceCleanedName = isPublicAssetResourceUrl(\n                chosenResourceUrl\n              )\n                ? extractDecodedFilenameWithExtensionFromPublicAssetResourceUrl(\n                    chosenResourceUrl\n                  )\n                : path.basename(chosenResourceUrl);\n              newResource.setName(resourceCleanedName);\n              newResource.setOrigin('gdevelop-asset-store', chosenResourceUrl);\n\n              onChooseResources([newResource]);\n            }}\n          />\n        ),\n      };\n    })\n    .filter(Boolean),\n  ...allResourceKindsAndMetadata.map(({ kind, createNewResource }) => ({\n    name: `url-chooser-${kind}`,\n    displayName: t`Use a public URL`,\n    displayTab: 'import-advanced',\n    kind,\n    renderComponent: (props: ResourceSourceComponentProps) => (\n      <UrlChooser\n        createNewResource={createNewResource}\n        onChooseResources={props.onChooseResources}\n        options={props.options}\n        key={`url-chooser-${kind}`}\n      />\n    ),\n  })),\n];\n\nexport default browserResourceSources;\n","// @flow\nconst spinnerImgSrc = `data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGZpbGw9Im5vbmUiIHZpZXdCb3g9IjAgMCAyNCAyNCI+CjxjaXJjbGUgb3BhY2l0eT0nMC4yNScgY3g9IjEyIiBjeT0iMTIiIHI9IjEwIiBzdHJva2U9IiNGRkZGRkYiIHN0cm9rZS13aWR0aD0iNCI+PC9jaXJjbGU+CjxwYXRoIG9wYWNpdHk9JzAuNzUnIGZpbGw9IiNGRkZGRkYiIGQ9Ik00IDEyYTggOCAwIDAxOC04VjBDNS4zNzMgMCAwIDUuMzczIDAgMTJoNHptMiA1LjI5MUE3Ljk2MiA3Ljk2MiAwIDAxNCAxMkgwYzAgMy4wNDIgMS4xMzUgNS44MjQgMyA3LjkzOGwzLTIuNjQ3eiI+PC9wYXRoPgo8L3N2Zz4=`;\n\nexport const displayBlackLoadingScreenOrThrow = (\n  externalWindow: WindowProxy\n) => {\n  externalWindow.document.write(\n    `<html>\n  <head>\n    <style>\n      body {\n        margin: 0;\n        padding: 0;\n        background-color: #000000;\n        overflow: hidden;\n        height: 100vh;\n        width: 100%;\n        display: flex;\n        align-items: center;\n        justify-content: center;\n        color: white;\n      }\n      @keyframes spin {\n        100% {\n          transform:rotate(360deg);\n        }\n      }\n      .spinning-loader {\n        animation: spin 3s linear infinite;\n      }\n    </style>\n  </head>\n  <body>\n      <img class=\"spinning-loader\" width=\"50\" alt=\"Loading...\" src=\"${spinnerImgSrc}\">\n  </body>\n</html>`\n  );\n};\n","// @flow\nimport {\n  type ResourceExternalEditor,\n  type ExternalEditorInput,\n  type ExternalEditorOutput,\n  type ExternalEditorBase64Resource,\n  type EditWithExternalEditorOptions,\n  saveBlobUrlsFromExternalEditorBase64Resources,\n  freeBlobsAndUpdateMetadata,\n  patchExternalEditorMetadataWithResourcesNamesIfNecessary,\n  readMetadata,\n} from './ResourceExternalEditor';\nimport { sendExternalEditorOpened } from '../Utils/Analytics/EventSender';\nimport { t } from '@lingui/macro';\nimport { isBlobURL, isURL } from './ResourceUtils';\nimport { type ResourceKind } from './ResourceSource';\nimport {\n  convertBlobToDataURL,\n  downloadUrlsToBlobs,\n  type ItemResult,\n} from '../Utils/BlobDownloader';\nimport { showWarningBox } from '../UI/Messages/MessageBox';\nimport { displayBlackLoadingScreenOrThrow } from '../Utils/BrowserExternalWindowUtils';\nimport { UserCancellationError } from '../LoginProvider/Utils';\nlet nextExternalEditorWindowId = 0;\n\nconst externalEditorIndexHtml: { ['piskel' | 'yarn' | 'jfxr']: string } = {\n  piskel: 'external/piskel/piskel-index.html',\n  yarn: 'external/yarn/yarn-index.html',\n  jfxr: 'external/jfxr/jfxr-index.html',\n};\n\nconst openAndWaitForExternalEditorWindow = async ({\n  externalEditorWindow,\n  externalEditorName,\n  externalEditorInput,\n  signal,\n}: {|\n  externalEditorWindow: any,\n  externalEditorName: 'piskel' | 'yarn' | 'jfxr',\n  externalEditorInput: ExternalEditorInput,\n  signal: AbortSignal,\n|}): Promise<?ExternalEditorOutput> => {\n  if (signal.aborted) {\n    return Promise.reject(new UserCancellationError(''));\n  }\n  return new Promise((resolve, reject) => {\n    let externalEditorLoaded = false;\n    let externalEditorClosed = false;\n    let externalEditorOutput: ?ExternalEditorOutput = null;\n\n    const onMessageEvent = (event: MessageEvent) => {\n      if (event.source !== externalEditorWindow) {\n        return;\n      }\n\n      if (!event.data || typeof event.data !== 'object') {\n        console.warn(\n          'Ignoring malformed message data from the external editor window.'\n        );\n        return;\n      }\n\n      const { id, payload } = event.data;\n      if (id === `external-editor-ready`) {\n        console.info(`External editor \"${externalEditorName}\" ready.`);\n\n        // Some browsers like Safari might not trigger the \"load\" event, but now we can\n        // be sure the editor is loaded: the proof being that we received this message.\n        // Mark the editor as loaded and re-attach a unload listener to be safe.\n        externalEditorLoaded = true;\n        externalEditorWindow.addEventListener('unload', () => {\n          onExternalEditorWindowClosed();\n        });\n\n        // Now that the external editor is loaded and ready, we can ask it to open the resources.\n        externalEditorWindow.postMessage(\n          {\n            id: 'open-external-editor-input',\n            payload: externalEditorInput,\n          },\n          // Ensure only external editors hosted on the same server as the GDevelop editor\n          // can receive the message:\n          window.location.origin\n        );\n      } else if (id === `save-external-editor-output`) {\n        console.info(\n          `Received data from external editor \"${externalEditorName}.\"`\n        );\n        // $FlowFixMe - assuming the typing is good.\n        externalEditorOutput = payload;\n      } else if (event.data.id === 'close') {\n        externalEditorWindow.close();\n        onExternalEditorWindowClosed();\n      }\n    };\n    window.addEventListener('message', onMessageEvent);\n\n    const onExternalEditorWindowClosed = () => {\n      if (externalEditorClosed) {\n        // Somehow this editor was already closed.\n        return;\n      }\n      externalEditorClosed = true;\n      console.info(`External editor \"${externalEditorName}\" closed.`);\n      window.removeEventListener('message', onMessageEvent);\n      resolve(externalEditorOutput);\n    };\n\n    signal.addEventListener('abort', () => {\n      reject(new UserCancellationError(''));\n      if (externalEditorClosed) return;\n      externalEditorWindow.close();\n      onExternalEditorWindowClosed();\n    });\n\n    externalEditorWindow.addEventListener('load', () => {\n      console.info(`External editor \"${externalEditorName}\" loaded.`);\n      externalEditorLoaded = true;\n\n      externalEditorWindow.addEventListener('unload', () => {\n        onExternalEditorWindowClosed();\n      });\n    });\n\n    // Change the HTML file displayed by the window so that it starts loading\n    // the editor.\n    // The browser will load the editor HTML/CSS/JS, then will fire the `load` event\n    // (though not on Safari), then the editor will send a `external-editor-ready` event\n    // (on all browsers), after which we will then be ready to have it open the resources.\n    // (see `open-external-editor-input`).\n    externalEditorWindow.location = externalEditorIndexHtml[externalEditorName];\n\n    // If the editor is not ready after 10 seconds and not closed, force it to be closed.\n    // Something wrong is going on and we don't want to block the user.\n    setTimeout(() => {\n      if (externalEditorLoaded || externalEditorClosed) return;\n      console.info(\n        `External editor \"${externalEditorName} not loaded after 10 seconds - closing its window.\"`\n      );\n\n      // The external editor is not loaded after 10 seconds, abort.\n      externalEditorWindow.close();\n      onExternalEditorWindowClosed();\n    }, 10000);\n  });\n};\n\n/**\n * Download (or read locally) resources and prepare them to be edited\n * by an external editor.\n */\nexport const downloadAndPrepareExternalEditorBase64Resources = async ({\n  project,\n  resourceNames,\n}: {|\n  project: gdProject,\n  resourceNames: Array<string>,\n|}): Promise<Array<ExternalEditorBase64Resource>> => {\n  type ResourceToDownload = {|\n    resourceName: string,\n    url: string,\n  |};\n\n  const urlsToDownload: Array<ResourceToDownload> = [];\n  const resourcesManager = project.getResourcesManager();\n  resourceNames.forEach(resourceName => {\n    if (!resourcesManager.hasResource(resourceName)) return;\n\n    const resource = resourcesManager.getResource(resourceName);\n    const url = resource.getFile();\n    if (isURL(url)) {\n      if (isBlobURL(url)) {\n        console.error('Unsupported blob URL for a resource - ignoring it.');\n      } else {\n        urlsToDownload.push({\n          url,\n          resourceName,\n        });\n      }\n    } else {\n      console.error('Unsupported local file for a resource - ignoring it.');\n    }\n  });\n\n  const downloadedBlobs: Array<\n    ItemResult<ResourceToDownload>\n  > = await downloadUrlsToBlobs({\n    urlContainers: urlsToDownload,\n    onProgress: (count, total) => {},\n  });\n\n  const resourcesToDataUrl = new Map<\n    string,\n    {|\n      dataUrl: string,\n      localFilePath?: string,\n    |}\n  >();\n  await Promise.all(\n    downloadedBlobs.map(async ({ error, blob, item }) => {\n      if (blob) {\n        try {\n          resourcesToDataUrl.set(item.resourceName, {\n            dataUrl: await convertBlobToDataURL(blob),\n          });\n        } catch (error) {\n          console.error(\n            `Unable to read data from resource \"${\n              item.resourceName\n            }\" - ignoring it.`,\n            error\n          );\n        }\n      }\n    })\n  );\n\n  return resourceNames.map(resourceName => {\n    const resourceData = resourcesToDataUrl.get(resourceName);\n    if (!resourceData)\n      return {\n        name: resourceName,\n        dataUrl: '',\n      };\n\n    const { localFilePath, dataUrl } = resourceData;\n    return {\n      name: resourceName,\n      dataUrl,\n      localFilePath,\n    };\n  });\n};\n\n/**\n * Edit one or more resources with the specified external editor.\n */\nconst editWithBrowserExternalEditor = async ({\n  externalEditorName,\n  externalEditorWindow,\n  defaultName,\n  metadataKey,\n  resourceKind,\n  options,\n}: {|\n  externalEditorName: 'piskel' | 'yarn' | 'jfxr',\n  externalEditorWindow: any,\n  defaultName: string,\n  metadataKey: string,\n  resourceKind: ResourceKind,\n  options: EditWithExternalEditorOptions,\n|}) => {\n  const { project, resourceNames, resourceManagementProps, signal } = options;\n\n  // Fetch all edited resources as base64 encoded \"data urls\" (`data:...`).\n  const resources = await downloadAndPrepareExternalEditorBase64Resources({\n    project,\n    resourceNames,\n  });\n\n  const externalEditorInput: ExternalEditorInput = {\n    singleFrame: options.extraOptions.singleFrame,\n    externalEditorData: readMetadata(\n      metadataKey,\n      options.extraOptions.existingMetadata\n    ),\n    fps: options.extraOptions.fps,\n    isLooping: options.extraOptions.isLooping,\n    name: options.extraOptions.name || resourceNames[0] || defaultName,\n    resources,\n  };\n\n  sendExternalEditorOpened(externalEditorName);\n  const externalEditorOutput: ?ExternalEditorOutput = await openAndWaitForExternalEditorWindow(\n    { externalEditorWindow, externalEditorName, externalEditorInput, signal }\n  );\n  if (!externalEditorOutput) return null; // Changes cancelled.\n\n  // Save the edited files back to the GDevelop resources, as \"blob urls\" (blob:...)\n  // which can then uploaded or saved locally.\n  const modifiedResources = await saveBlobUrlsFromExternalEditorBase64Resources(\n    {\n      baseNameForNewResources: externalEditorOutput.baseNameForNewResources,\n      project,\n      resources: externalEditorOutput.resources,\n      resourceKind,\n    }\n  );\n\n  // Ask the project to persist the resources (\"blob urls\" will be either uploaded\n  // or saved locally).\n  try {\n    await resourceManagementProps.onFetchNewlyAddedResources();\n  } catch (error) {\n    console.error(\n      'An error happened while fetching the newly added resources:',\n      error\n    );\n  }\n\n  // Free the \"blob urls\" so that blobs don't stay in memory! They are only temporarily\n  // useful while waiting for an upload/local file save.\n  freeBlobsAndUpdateMetadata({\n    modifiedResources,\n    metadataKey,\n    metadata: options.extraOptions.singleFrame\n      ? externalEditorOutput.externalEditorData\n      : null,\n  });\n\n  // Some editors (Piskel) need to have resource names persisted.\n  patchExternalEditorMetadataWithResourcesNamesIfNecessary(\n    modifiedResources.map(({ resource }) => resource.getName()),\n    externalEditorOutput.externalEditorData\n  );\n\n  return {\n    resources: modifiedResources.map(({ resource, originalIndex }) => ({\n      name: resource.getName(),\n      originalIndex,\n    })),\n    newName: externalEditorOutput.baseNameForNewResources,\n    newMetadata: { [metadataKey]: externalEditorOutput.externalEditorData },\n  };\n};\n\nconst cloudProjectWarning = t`You need to save this project as a cloud project to install this asset. Please save your project and try again.`;\n\n/**\n * Open a window showing a black \"loading...\" screen. It's important this is done\n * NOT in an asynchronous way but JUST after a click. Otherwise, browsers like Safari\n * will block the window opening.\n */\nconst immediatelyOpenLoadingWindowForExternalEditor = () => {\n  const targetId = 'GDevelopExternalEditor' + nextExternalEditorWindowId++;\n  const width = 800;\n  const height = 600;\n  const left = window.screenX + window.innerWidth / 2 - width / 2;\n  const top = window.screenY + window.innerHeight / 2 - height / 2;\n\n  const externalEditorWindow = window.open(\n    'about:blank',\n    targetId,\n    `width=${width},height=${height},left=${left},top=${top}`\n  );\n  if (!externalEditorWindow) {\n    throw new Error(\n      \"Can't open the external editor because of browser restrictions.\"\n    );\n  }\n\n  displayBlackLoadingScreenOrThrow(externalEditorWindow);\n\n  return externalEditorWindow;\n};\n\n/**\n * This is the list of editors that can be used to edit resources\n * when running in a browser.\n */\nconst editors: Array<ResourceExternalEditor> = [\n  {\n    name: 'piskel-app',\n    createDisplayName: t`Create with Piskel`,\n    editDisplayName: t`Edit with Piskel`,\n    kind: 'image',\n    edit: async options => {\n      if (options.getStorageProvider().internalName !== 'Cloud') {\n        const { i18n } = options;\n        showWarningBox(i18n._(cloudProjectWarning), {\n          delayToNextTick: true,\n        });\n        return null;\n      }\n\n      const externalEditorWindow = immediatelyOpenLoadingWindowForExternalEditor();\n      return await editWithBrowserExternalEditor({\n        options,\n        externalEditorWindow,\n        externalEditorName: 'piskel',\n        defaultName: 'New image',\n        metadataKey: 'pskl',\n        resourceKind: 'image',\n      });\n    },\n  },\n  {\n    name: 'jfxr-app',\n    createDisplayName: t`Create with Jfxr`,\n    editDisplayName: t`Edit with Jfxr`,\n    kind: 'audio',\n    edit: async options => {\n      if (options.getStorageProvider().internalName !== 'Cloud') {\n        const { i18n } = options;\n        showWarningBox(i18n._(cloudProjectWarning), {\n          delayToNextTick: true,\n        });\n        return null;\n      }\n\n      const externalEditorWindow = immediatelyOpenLoadingWindowForExternalEditor();\n      return await editWithBrowserExternalEditor({\n        options,\n        externalEditorWindow,\n        externalEditorName: 'jfxr',\n        defaultName: 'New sound effect',\n        metadataKey: 'jfxr',\n        resourceKind: 'audio',\n      });\n    },\n  },\n  {\n    name: 'yarn-app',\n    createDisplayName: t`Create with Yarn`,\n    editDisplayName: t`Edit with Yarn`,\n    kind: 'json',\n    edit: async options => {\n      if (options.getStorageProvider().internalName !== 'Cloud') {\n        const { i18n } = options;\n        showWarningBox(i18n._(cloudProjectWarning), {\n          delayToNextTick: true,\n        });\n        return null;\n      }\n\n      const externalEditorWindow = immediatelyOpenLoadingWindowForExternalEditor();\n      return await editWithBrowserExternalEditor({\n        options,\n        externalEditorWindow,\n        externalEditorName: 'yarn',\n        defaultName: 'New dialogue tree',\n        metadataKey: 'yarn',\n        resourceKind: 'json',\n      });\n    },\n  },\n];\n\nexport default editors;\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { I18n } from '@lingui/react';\nimport React, { Component } from 'react';\nimport Dialog from '../../../UI/Dialog';\nimport FlatButton from '../../../UI/FlatButton';\nimport { Column, Line } from '../../../UI/Grid';\nimport Text from '../../../UI/Text';\n\ntype Props = {|\n  error: Error,\n  onClose: () => void,\n|};\n\nexport default class BrowserPreviewErrorDialog extends Component<Props> {\n  render() {\n    const { error, onClose } = this.props;\n\n    return (\n      <I18n>\n        {({ i18n }) => (\n          <Dialog\n            title={<Trans>Could not launch the preview</Trans>}\n            actions={[\n              <FlatButton\n                key=\"close\"\n                label={<Trans>Close</Trans>}\n                onClick={onClose}\n              />,\n            ]}\n            onRequestClose={onClose}\n            open\n          >\n            <Line>\n              <Column noMargin>\n                <Text>\n                  {// $FlowFixMe - AWS returned errors can have extra fields\n                  error.code === 'NetworkingError' ? (\n                    <Trans>\n                      The preview could not be launched because you're offline.\n                    </Trans>\n                  ) : (\n                    <Trans>\n                      The preview could not be launched because an error\n                      happened: {error.message}.\n                    </Trans>\n                  )}\n                </Text>\n              </Column>\n            </Line>\n            <Line>\n              <Column noMargin>\n                <Text>\n                  <Trans>\n                    Make sure you're online, have a proper internet connection\n                    and try again. If you download and use GDevelop desktop\n                    application, you can also run previews without any internet\n                    connection.\n                  </Trans>\n                </Text>\n              </Column>\n            </Line>\n          </Dialog>\n        )}\n      </I18n>\n    );\n  }\n}\n","// @flow\nimport axios from 'axios';\nimport { GDevelopGamePreviews } from './ApiConfigs';\nimport { getSignedUrl } from './Usage';\n\nexport type UploadedObject = {|\n  Key: string,\n  Body: string,\n  ContentType: 'text/javascript' | 'text/html',\n|};\n\nexport const uploadObject = (params: UploadedObject): Promise<any> => {\n  return getSignedUrl({\n    uploadType: 'preview',\n    key: params.Key,\n    contentType: params.ContentType,\n  }).then(({ signedUrl }) =>\n    axios.put(signedUrl, params.Body, {\n      headers: {\n        'Content-Type': params.ContentType,\n      },\n    })\n  );\n};\n\nexport const getBaseUrl = () => {\n  return GDevelopGamePreviews.baseUrl;\n};\n","// @flow\nimport path from 'path-browserify';\nimport { uploadObject } from '../../Utils/GDevelopServices/Preview';\nconst gd: libGDevelop = global.gd;\n\nexport type TextFileDescriptor = {|\n  filePath: string,\n  text: string,\n|};\n\ntype PendingUploadFileDescriptor = {|\n  Key: string,\n  Body: string,\n  ContentType: 'text/javascript' | 'text/html',\n|};\n\ntype ConstructorArgs = {|\n  filesContent: Array<TextFileDescriptor>,\n  prefix: string,\n  bucketBaseUrl: string,\n|};\n\nconst isURL = (filename: string) => {\n  return (\n    filename.startsWith('http://') ||\n    filename.startsWith('https://') ||\n    filename.startsWith('ftp://') ||\n    filename.startsWith('blob:') ||\n    filename.startsWith('data:')\n  );\n};\n\n/**\n * An in-memory \"file system\" that can be used for GDevelop previews.\n */\nexport default class BrowserS3FileSystem {\n  prefix: string;\n  bucketBaseUrl: string;\n\n  // Store the content of some files.\n  _indexedFilesContent: { [string]: TextFileDescriptor };\n\n  // Store all the objects that should be written on the S3 bucket.\n  // Call uploadPendingObjects to send them\n  _pendingUploadObjects: Array<PendingUploadFileDescriptor> = [];\n\n  // Store a set of all external URLs copied so that we can simulate\n  // readDir result.\n  _allCopiedExternalUrls = new Set<string>();\n\n  constructor({ filesContent, prefix, bucketBaseUrl }: ConstructorArgs) {\n    this.prefix = prefix;\n    this.bucketBaseUrl = bucketBaseUrl;\n\n    this._indexedFilesContent = {};\n    filesContent.forEach(textFileDescriptor => {\n      this._indexedFilesContent[\n        textFileDescriptor.filePath\n      ] = textFileDescriptor;\n    });\n  }\n\n  uploadPendingObjects = () => {\n    return Promise.all(this._pendingUploadObjects.map(uploadObject)).then(\n      result => {\n        console.log('Uploaded all objects:', result);\n        this._pendingUploadObjects = [];\n      },\n      error => {\n        console.error(\"Can't upload all objects:\", error);\n        throw error;\n      }\n    );\n  };\n\n  mkDir = (path: string) => {\n    // Assume required directories always exist.\n  };\n  dirExists = (path: string) => {\n    // Assume required directories always exist.\n    return true;\n  };\n  clearDir = (path: string) => {\n    // Assume path is cleared.\n  };\n  getTempDir = () => {\n    return '/virtual-unused-tmp-dir';\n  };\n  fileNameFrom = (fullpath: string) => {\n    if (isURL(fullpath)) return fullpath;\n\n    return path.basename(fullpath);\n  };\n  dirNameFrom = (fullpath: string) => {\n    if (isURL(fullpath)) return '';\n\n    return path.dirname(fullpath);\n  };\n  makeAbsolute = (filename: string, baseDirectory: string) => {\n    if (isURL(filename)) return filename;\n\n    if (!this.isAbsolute(baseDirectory))\n      baseDirectory = path.resolve(baseDirectory);\n\n    return path.resolve(baseDirectory, path.normalize(filename));\n  };\n  makeRelative = (filename: string, baseDirectory: string) => {\n    if (isURL(filename)) return filename;\n\n    return path.relative(baseDirectory, path.normalize(filename));\n  };\n  isAbsolute = (fullpath: string) => {\n    if (isURL(fullpath)) return true;\n\n    if (fullpath.length === 0) return true;\n    return (\n      (fullpath.length > 0 && fullpath.charAt(0) === '/') ||\n      (fullpath.length > 1 && fullpath.charAt(1) === ':')\n    );\n  };\n  copyFile = (source: string, dest: string) => {\n    //URL are not copied.\n    if (isURL(source)) {\n      this._allCopiedExternalUrls.add(source);\n      return true;\n    }\n\n    console.warn('Copy not done from', source, 'to', dest);\n    return true;\n  };\n  writeToFile = (fullPath: string, contents: string) => {\n    const key = fullPath.replace(this.bucketBaseUrl, '');\n    const mime = {\n      '.js': 'text/javascript',\n      '.html': 'text/html',\n    };\n    const fileExtension = path.extname(fullPath);\n\n    // Defer real upload until it's triggered by calling\n    // uploadPendingObjects.\n    this._pendingUploadObjects.push({\n      Key: key,\n      Body: contents,\n      ContentType: mime[fileExtension],\n    });\n    return true;\n  };\n\n  readFile = (file: string) => {\n    if (!!this._indexedFilesContent[file])\n      return this._indexedFilesContent[file].text;\n\n    console.error(`Unknown file ${file}, returning an empty string`);\n    return '';\n  };\n\n  readDir = (path: string, ext: string) => {\n    ext = ext.toUpperCase();\n    var output = new gd.VectorString();\n\n    // Simulate ReadDir by returning all external URLs\n    // with the filename matching the extension.\n    this._allCopiedExternalUrls.forEach(url => {\n      const upperCaseUrl = url.toUpperCase();\n      if (upperCaseUrl.indexOf(ext) === upperCaseUrl.length - ext.length) {\n        output.push_back(url);\n      }\n    });\n\n    return output;\n  };\n\n  fileExists = (filename: string) => {\n    if (isURL(filename)) return true;\n\n    // Assume all files asked for exists.\n    return true;\n  };\n}\n","// @flow\nimport { getIDEVersion } from '../Version';\n\ntype FileSet =\n  | 'preview'\n  | 'cordova'\n  | 'electron'\n  | 'web'\n  | 'cocos2d-js'\n  | 'facebook-instant-games';\n\nconst filesToDownload: { [FileSet]: Array<string> } = {\n  preview: ['/Runtime/index.html'],\n  web: ['/Runtime/index.html', '/Runtime/Electron/LICENSE.GDevelop.txt'],\n  'cocos2d-js': [\n    '/Runtime/Cocos2d/cocos2d-js-v3.10.js',\n    '/Runtime/Cocos2d/index.html',\n    '/Runtime/Cocos2d/main.js',\n    '/Runtime/Cocos2d/project.json',\n  ],\n  'facebook-instant-games': [\n    '/Runtime/FacebookInstantGames/fbapp-config.json',\n    '/Runtime/FacebookInstantGames/index.html',\n  ],\n  cordova: [\n    '/Runtime/Cordova/www/index.html',\n    '/Runtime/Cordova/www/LICENSE.GDevelop.txt',\n    '/Runtime/Cordova/config.xml',\n    '/Runtime/Cordova/package.json',\n  ],\n  electron: [\n    '/Runtime/index.html',\n    '/Runtime/Electron/main.js',\n    '/Runtime/Electron/package.json',\n    '/Runtime/Electron/LICENSE.GDevelop.txt',\n  ],\n};\n\nexport type TextFileDescriptor = {| text: string, filePath: string |};\n\nexport const findGDJS = (\n  fileSet: FileSet\n): Promise<{|\n  gdjsRoot: string,\n  filesContent: Array<TextFileDescriptor>,\n|}> => {\n  // Get GDJS for this version. If you updated the version,\n  // run `newIDE/web-app/scripts/deploy-GDJS-Runtime` script.\n  let gdjsRoot = `https://resources.gdevelop-app.com/GDJS-${getIDEVersion()}`;\n\n  // If you want to test your local changes to the game engine on the local web-app,\n  // run `npx serve --cors -p 5001` (or another CORS enabled http server on port 5001)\n  // in `newIDE/app/resources/GDJS` and uncomment this line:\n  // gdjsRoot = `http://localhost:5001`;\n\n  return Promise.all(\n    filesToDownload[fileSet].map(relativeFilePath => {\n      const url = gdjsRoot + relativeFilePath;\n\n      // Don't do any caching, rely on the browser cache only.\n      return fetch(url).then(response => {\n        if (!response.ok) {\n          console.error(`Error while downloading \"${url}\"`, response);\n          throw new Error(\n            `Error while downloading \"${url}\" (status: ${response.status})`\n          );\n        }\n        return response.text().then(text => ({\n          filePath: url,\n          text,\n        }));\n      });\n    })\n  ).then(filesContent => {\n    return {\n      gdjsRoot,\n      filesContent,\n    };\n  });\n};\n","// @flow\nimport {\n  type PreviewDebuggerServerCallbacks,\n  type PreviewDebuggerServer,\n  type DebuggerId,\n} from '../../PreviewLauncher.flow';\n\nlet debuggerServerState: 'started' | 'stopped' = 'stopped';\nconst callbacksList: Array<PreviewDebuggerServerCallbacks> = [];\n\nlet nextDebuggerId = 0;\n\nconst existingPreviewWindows: {\n  [DebuggerId]: WindowProxy,\n} = {};\n\nconst getExistingDebuggerIds = () =>\n  Object.keys(existingPreviewWindows).map(key => Number(key));\n\nconst getDebuggerIdForPreviewWindow = (previewWindow: any) => {\n  for (const key in existingPreviewWindows) {\n    const id = Number(key);\n    if (existingPreviewWindows[id] === previewWindow) {\n      return id;\n    }\n  }\n  return null;\n};\n\nlet windowClosedPollingIntervalId = null;\n\n/**\n * Listen to window closing so that we can notify the debuggers\n * when a preview window is closed.\n * Polling seems the only option to do so.\n */\nconst setupWindowClosedPolling = () => {\n  if (windowClosedPollingIntervalId !== null) return;\n\n  windowClosedPollingIntervalId = setInterval(() => {\n    for (const key in existingPreviewWindows) {\n      const id = Number(key);\n      const previewWindow = existingPreviewWindows[id];\n      if (previewWindow.closed) {\n        console.info('A preview window was closed, with debugger id:', id);\n        delete existingPreviewWindows[id];\n        callbacksList.forEach(({ onConnectionClosed }) =>\n          onConnectionClosed({\n            id,\n            debuggerIds: getExistingDebuggerIds(),\n          })\n        );\n        if (!Object.keys(existingPreviewWindows).length) {\n          clearInterval(windowClosedPollingIntervalId);\n          windowClosedPollingIntervalId = null;\n        }\n      }\n    }\n  }, 1000);\n};\n\nconst PREVIEWS_ORIGIN = 'https://game-previews.gdevelop.io';\n\n/**\n * A debugger server implemented using the ability to send/receive messages\n * from popup windows in the browser.\n */\nexport const browserPreviewDebuggerServer: PreviewDebuggerServer = {\n  startServer: async () => {\n    if (debuggerServerState === 'started') return;\n    debuggerServerState = 'started';\n\n    window.addEventListener('message', event => {\n      if (event.origin !== PREVIEWS_ORIGIN) return;\n\n      const id = getDebuggerIdForPreviewWindow(event.source);\n      if (id === null) return; // Could not find the id of this preview window.\n\n      try {\n        const parsedMessage = JSON.parse(event.data);\n        callbacksList.forEach(({ onHandleParsedMessage }) =>\n          onHandleParsedMessage({ id, parsedMessage })\n        );\n      } catch (error) {\n        console.error(\n          'Error while parsing messages coming from a preview:',\n          error\n        );\n      }\n    });\n\n    setupWindowClosedPolling();\n\n    callbacksList.forEach(({ onServerStateChanged }) => onServerStateChanged());\n  },\n  sendMessage: (id: DebuggerId, message: Object) => {\n    const previewWindow = existingPreviewWindows[id];\n    if (!previewWindow) return;\n\n    try {\n      previewWindow.postMessage(message, PREVIEWS_ORIGIN);\n    } catch (error) {\n      console.error('Unable to send a message to the preview window:', error);\n    }\n  },\n  getServerState: () => debuggerServerState,\n  getExistingDebuggerIds,\n  registerCallbacks: (callbacks: PreviewDebuggerServerCallbacks) => {\n    callbacksList.push(callbacks);\n\n    return () => {\n      const callbacksIndex = callbacksList.indexOf(callbacks);\n      if (callbacksIndex !== -1) callbacksList.splice(callbacksIndex, 1);\n    };\n  },\n};\n\nexport const registerNewPreviewWindow = (previewWindow: WindowProxy) => {\n  // Associate this window with a new debugger id.\n  const id = nextDebuggerId++;\n  existingPreviewWindows[id] = previewWindow;\n\n  setupWindowClosedPolling();\n\n  // Notify the debuggers that a new preview was opened.\n  callbacksList.forEach(({ onConnectionOpened }) =>\n    onConnectionOpened({\n      id,\n      debuggerIds: getExistingDebuggerIds(),\n    })\n  );\n};\n\nexport const getExistingPreviewWindowForDebuggerId = (\n  id: ?DebuggerId\n): ?WindowProxy => {\n  if (id == null) return null;\n\n  return existingPreviewWindows[id] || null;\n};\n","// @flow\nimport * as React from 'react';\nimport BrowserPreviewErrorDialog from './BrowserPreviewErrorDialog';\nimport BrowserS3FileSystem from '../BrowserS3FileSystem';\nimport { findGDJS } from '../../../GameEngineFinder/BrowserS3GDJSFinder';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type PreviewOptions,\n  type PreviewLauncherProps,\n} from '../../PreviewLauncher.flow';\nimport { getBaseUrl } from '../../../Utils/GDevelopServices/Preview';\nimport { makeTimestampedId } from '../../../Utils/TimestampedId';\nimport {\n  browserPreviewDebuggerServer,\n  getExistingPreviewWindowForDebuggerId,\n  registerNewPreviewWindow,\n} from './BrowserPreviewDebuggerServer';\nimport Window from '../../../Utils/Window';\nimport { displayBlackLoadingScreenOrThrow } from '../../../Utils/BrowserExternalWindowUtils';\nimport { getGDevelopResourceJwtToken } from '../../../Utils/GDevelopServices/Project';\nimport { isNativeMobileApp } from '../../../Utils/Platform';\nimport { getIDEVersionWithHash } from '../../../Version';\nconst gd: libGDevelop = global.gd;\n\ntype State = {|\n  error: ?Error,\n|};\n\nlet nextPreviewWindowId = 0;\n\n/**\n * Open a window showing a black \"loading...\" screen. It's important this is done\n * NOT in an asynchronous way but JUST after a click. Otherwise, browsers like Safari\n * will block the window opening.\n */\nexport const immediatelyOpenNewPreviewWindow = (\n  project: gdProject\n): WindowProxy => {\n  const width = project.getGameResolutionWidth();\n  const height = project.getGameResolutionHeight();\n  const left = window.screenX + window.innerWidth / 2 - width / 2;\n  const top = window.screenY + window.innerHeight / 2 - height / 2;\n\n  const targetId = 'GDevelopPreview' + nextPreviewWindowId++;\n  const previewWindow = window.open(\n    'about:blank',\n    targetId,\n    `width=${width},height=${height},left=${left},top=${top}`\n  );\n  if (!previewWindow) {\n    throw new Error(\n      \"Can't open the preview window because of browser restrictions.\"\n    );\n  }\n\n  displayBlackLoadingScreenOrThrow(previewWindow);\n\n  return previewWindow;\n};\n\nexport default class BrowserS3PreviewLauncher extends React.Component<\n  PreviewLauncherProps,\n  State\n> {\n  canDoNetworkPreview = () => false;\n  canDoHotReload = () => false;\n\n  state = {\n    error: null,\n  };\n\n  _prepareExporter = (): Promise<{|\n    outputDir: string,\n    exporter: gdjsExporter,\n    browserS3FileSystem: BrowserS3FileSystem,\n  |}> => {\n    return findGDJS('preview').then(({ gdjsRoot, filesContent }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const prefix = makeTimestampedId();\n\n      const outputDir = getBaseUrl() + prefix;\n      const browserS3FileSystem = new BrowserS3FileSystem({\n        filesContent,\n        bucketBaseUrl: getBaseUrl(),\n        prefix,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        browserS3FileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n      exporter.setCodeOutputDirectory(outputDir);\n\n      return {\n        exporter,\n        outputDir,\n        browserS3FileSystem,\n      };\n    });\n  };\n\n  launchPreview = async (previewOptions: PreviewOptions): Promise<any> => {\n    const { project, layout, externalLayout, numberOfWindows } = previewOptions;\n    this.setState({\n      error: null,\n    });\n\n    const debuggerIds = this.getPreviewDebuggerServer().getExistingDebuggerIds();\n    const lastDebuggerId = debuggerIds.length\n      ? debuggerIds[debuggerIds.length - 1]\n      : null;\n    const shouldHotReload = previewOptions.hotReload && lastDebuggerId !== null;\n\n    // We abuse the \"hot reload\" to choose if we open a new window or replace\n    // the content of an existing one. But hot reload is NOT implemented (yet -\n    // it would need to generate the preview in the same place and trigger a reload\n    // of the scripts).\n    const existingPreviewWindow = shouldHotReload\n      ? getExistingPreviewWindowForDebuggerId(lastDebuggerId)\n      : null;\n\n    const previewWindows = existingPreviewWindow\n      ? [existingPreviewWindow]\n      : Array.from({ length: numberOfWindows }, () => {\n          try {\n            return immediatelyOpenNewPreviewWindow(project);\n          } catch (error) {\n            console.error(\n              'Unable to open a new preview window - this window will be ignored:',\n              error\n            );\n            return null;\n          }\n        }).filter(Boolean);\n\n    try {\n      await this.getPreviewDebuggerServer().startServer();\n    } catch (err) {\n      // Ignore any error when running the debugger server - the preview\n      // can still work without it.\n      console.error(\n        'Unable to start the Debugger Server for the preview:',\n        err\n      );\n    }\n\n    try {\n      const {\n        exporter,\n        outputDir,\n        browserS3FileSystem,\n      } = await this._prepareExporter();\n\n      const previewExportOptions = new gd.PreviewExportOptions(\n        project,\n        outputDir\n      );\n      previewExportOptions.setLayoutName(layout.getName());\n      previewExportOptions.setIsDevelopmentEnvironment(Window.isDev());\n      if (externalLayout) {\n        previewExportOptions.setExternalLayoutName(externalLayout.getName());\n      }\n\n      if (isNativeMobileApp()) {\n        previewExportOptions.useMinimalDebuggerClient();\n      } else {\n        previewExportOptions.useWindowMessageDebuggerClient();\n      }\n\n      // Scripts generated from extensions keep the same URL even after being modified.\n      // Use a cache bursting parameter to force the browser to reload them.\n      previewExportOptions.setNonRuntimeScriptsCacheBurst(Date.now());\n\n      previewExportOptions.setFullLoadingScreen(\n        previewOptions.fullLoadingScreen\n      );\n\n      previewExportOptions.setNativeMobileApp(isNativeMobileApp());\n      previewExportOptions.setGDevelopVersionWithHash(getIDEVersionWithHash());\n      previewExportOptions.setCrashReportUploadLevel(\n        this.props.crashReportUploadLevel\n      );\n      previewExportOptions.setPreviewContext(this.props.previewContext);\n      previewExportOptions.setProjectTemplateSlug(project.getTemplateSlug());\n      previewExportOptions.setSourceGameId(this.props.sourceGameId);\n\n      if (previewOptions.fallbackAuthor) {\n        previewExportOptions.setFallbackAuthor(\n          previewOptions.fallbackAuthor.id,\n          previewOptions.fallbackAuthor.username\n        );\n      }\n      if (previewOptions.authenticatedPlayer) {\n        previewExportOptions.setAuthenticatedPlayer(\n          previewOptions.authenticatedPlayer.playerId,\n          previewOptions.authenticatedPlayer.playerUsername,\n          previewOptions.authenticatedPlayer.playerToken\n        );\n      }\n\n      // The token, if any, to be used to read resources on GDevelop Cloud buckets.\n      const gdevelopResourceToken = getGDevelopResourceJwtToken();\n      if (gdevelopResourceToken)\n        previewExportOptions.setGDevelopResourceToken(gdevelopResourceToken);\n\n      exporter.exportProjectForPixiPreview(previewExportOptions);\n      previewExportOptions.delete();\n      exporter.delete();\n\n      // Upload any file that must be exported for the preview.\n      await browserS3FileSystem.uploadPendingObjects();\n\n      // Change the HTML file displayed by the preview window so that it starts loading\n      // the game.\n      previewWindows.forEach(\n        (previewWindow: WindowProxy) =>\n          (previewWindow.location = outputDir + '/index.html')\n      );\n\n      // If the preview windows are new, register them so that they can be accessed\n      // by the debugger.\n      if (!existingPreviewWindow) {\n        previewWindows.forEach((previewWindow: WindowProxy) => {\n          registerNewPreviewWindow(previewWindow);\n        });\n      }\n    } catch (error) {\n      this.setState({\n        error,\n      });\n    }\n  };\n\n  getPreviewDebuggerServer() {\n    return browserPreviewDebuggerServer;\n  }\n\n  render() {\n    const { error } = this.state;\n\n    if (error) {\n      return (\n        <BrowserPreviewErrorDialog\n          error={error}\n          onClose={() =>\n            this.setState({\n              error: null,\n            })\n          }\n        />\n      );\n    }\n\n    return null;\n  }\n}\n","// @flow\nimport axios from 'axios';\n\ntype UploadOptions = {\n  signedUrl: string,\n  contentType: string,\n};\n\nexport const uploadBlobFile = (\n  blob: Blob,\n  uploadOptions: UploadOptions,\n  onProgress: (progress: number, total: number) => void\n): Promise<void> => {\n  return axios\n    .put(uploadOptions.signedUrl, blob, {\n      headers: {\n        'Content-Type': uploadOptions.contentType,\n      },\n      // Allow any arbitrary large file to be sent\n      maxContentLength: Infinity,\n      onUploadProgress: progressEvent => {\n        if (!progressEvent || !progressEvent.total) {\n          onProgress(0, 0);\n          return;\n        }\n\n        onProgress(progressEvent.loaded, progressEvent.total);\n      },\n    })\n    .then(() => undefined);\n};\n","// @flow\nimport path from 'path-browserify';\nconst gd: libGDevelop = global.gd;\n\nexport type BlobFileDescriptor = {|\n  filePath: string,\n  blob: Blob,\n|};\n\nexport type TextFileDescriptor = {|\n  filePath: string,\n  text: string,\n|};\n\nexport type UrlFileDescriptor = {|\n  filePath: string,\n  url: string,\n|};\n\ntype ConstructorArgs = {|\n  textFiles: Array<TextFileDescriptor>,\n|};\n\nconst isURL = (filename: string) => {\n  return (\n    filename.startsWith('http://') ||\n    filename.startsWith('https://') ||\n    filename.startsWith('ftp://') ||\n    filename.startsWith('blob:') ||\n    filename.startsWith('data:')\n  );\n};\n\n// For some reason, `path.posix` is undefined when packaged\n// with webpack, so we're using `path` directly. As it's for the web-app,\n// it should always be the posix version. In tests on Windows,\n// it's necessary to use path.posix.\n// Search for \"pathPosix\" in the codebase for other places where this is used.\nconst pathPosix = path.posix || path;\n\n// TODO: Merge BrowserS3FileSystem into this? The way URLs are handled\n// is different though (BrowserS3FileSystem is not downloading anything\n// from URLs, while this file system does download files).\n\n/**\n * An in-memory \"file system\" that can be used for GDevelop exports.\n */\nexport default class BrowserFileSystem {\n  // The representation of the \"file system\":\n\n  /**\n   * Store all the text files (filepath => content)\n   * @private\n   */\n  _textFiles: { [string]: string } = {};\n\n  /**\n   * Store all the files that should be downloaded (filepath => url)\n   * @private\n   */\n  _filesToDownload: { [string]: string } = {};\n\n  /**\n   * Create a new in-memory file system.\n   */\n  constructor({ textFiles }: ConstructorArgs) {\n    textFiles.forEach(textFileDescriptor => {\n      this._textFiles[textFileDescriptor.filePath] = textFileDescriptor.text;\n    });\n  }\n\n  /**\n   * Returns all the in memory text files with the specified path prefix.\n   */\n  getAllTextFilesIn = (pathPrefix: string): Array<TextFileDescriptor> => {\n    return Object.keys(this._textFiles)\n      .filter(filePath => filePath.indexOf(pathPrefix) === 0)\n      .map(filePath => ({\n        filePath,\n        text: this._textFiles[filePath],\n      }));\n  };\n\n  /**\n   * Returns all the files that should be downloaded from a URL, with the specified destination path prefix.\n   */\n  getAllUrlFilesIn = (pathPrefix: string): Array<UrlFileDescriptor> => {\n    return Object.keys(this._filesToDownload)\n      .filter(filePath => filePath.indexOf(pathPrefix) === 0)\n      .map(filePath => ({\n        filePath,\n        url: this._filesToDownload[filePath],\n      }));\n  };\n\n  mkDir = (path: string) => {\n    // \"Directories\" are assumed to exist.\n    return true;\n  };\n  dirExists = (path: string) => {\n    // TODO: To be changed to be EnsureDirExists.\n    // \"Directories\" are assumed to exist.\n    return true;\n  };\n  clearDir = (path: string) => {\n    // Clear the files to be written in the specified directory.\n    const filePaths = Object.keys(this._textFiles);\n    filePaths.forEach(filePath => {\n      if (filePath.indexOf(path) === 0) {\n        delete this._textFiles[filePath];\n      }\n    });\n\n    return true;\n  };\n  getTempDir = () => {\n    return '/browser-file-system-tmp-dir';\n  };\n  fileNameFrom = (fullpath: string) => {\n    return pathPosix.basename(fullpath);\n  };\n  dirNameFrom = (fullpath: string) => {\n    return pathPosix.dirname(fullpath);\n  };\n  makeAbsolute = (filePathOrURL: string, baseDirectoryOrURL: string) => {\n    // URLs are always absolute\n    if (isURL(filePathOrURL)) return filePathOrURL;\n\n    if (!this.isAbsolute(baseDirectoryOrURL))\n      baseDirectoryOrURL = pathPosix.resolve(baseDirectoryOrURL);\n\n    return pathPosix.resolve(\n      baseDirectoryOrURL,\n      pathPosix.normalize(filePathOrURL)\n    );\n  };\n  makeRelative = (filePathOrURL: string, baseDirectoryOrURL: string) => {\n    if (isURL(filePathOrURL)) {\n      // Cutting the start if the URL is relative to the base URL\n      if (filePathOrURL.indexOf(baseDirectoryOrURL) === 0) {\n        return filePathOrURL.substring(baseDirectoryOrURL.length);\n      }\n\n      // Keep the URL \"absolute\" if on different domains.\n      console.warn(\n        `${filePathOrURL} cannot be made relative to ${baseDirectoryOrURL}, please double check this behavior is correct.`\n      );\n      return filePathOrURL;\n    }\n\n    // Paths are treated as usual paths.\n    return pathPosix.relative(\n      baseDirectoryOrURL,\n      pathPosix.normalize(filePathOrURL)\n    );\n  };\n  isAbsolute = (fullpath: string) => {\n    // URLs are always absolute\n    if (isURL(fullpath)) return true;\n\n    // Paths are absolute if starting from the root\n    return fullpath.length > 0 && fullpath.charAt(0) === '/';\n  };\n\n  copyFile = (source: string, dest: string) => {\n    // URLs are not copied, but marked as to be downloaded.\n    if (isURL(source)) {\n      if (isURL(dest)) {\n        console.error(\n          `Destination can't be a URL in copyFile (from ${source} to ${dest}).`\n        );\n        return false;\n      }\n\n      this._filesToDownload[pathPosix.normalize(dest)] = source;\n      return true;\n    }\n\n    // If this is a file that we have already in memory,\n    // copy its path.\n    if (!!this._textFiles[source]) {\n      this._textFiles[pathPosix.normalize(dest)] = this._textFiles[source];\n      return true;\n    }\n\n    console.error(`File not found in copyFile (from ${source} to ${dest}).`);\n    return false;\n  };\n\n  writeToFile = (filePath: string, content: string) => {\n    this._textFiles[pathPosix.normalize(filePath)] = content;\n    return true;\n  };\n\n  readFile = (file: string): string => {\n    if (this._textFiles[file]) return this._textFiles[file];\n\n    console.error(`Unknown file ${file}, returning an empty string`);\n    return '';\n  };\n\n  readDir = (path: string, ext: string) => {\n    ext = ext.toUpperCase();\n    var output = new gd.VectorString();\n\n    // Simulate ReadDir by returning all external URLs\n    // with the filename matching the extension.\n    Object.keys(this._filesToDownload).forEach(filePath => {\n      const upperCaseFilePath = filePath.toUpperCase();\n      if (\n        upperCaseFilePath.indexOf(ext) ===\n        upperCaseFilePath.length - ext.length\n      ) {\n        output.push_back(filePath);\n      }\n    });\n\n    return output;\n  };\n\n  fileExists = (filePath: string) => {\n    if (isURL(filePath)) return true;\n\n    const normalizedFilePath = pathPosix.normalize(filePath);\n    return (\n      !!this._textFiles[normalizedFilePath] ||\n      !!this._filesToDownload[normalizedFilePath]\n    );\n  };\n}\n","// @flow\nimport * as React from 'react';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type Build,\n  buildCordovaAndroid,\n  getBuildFileUploadOptions,\n} from '../../Utils/GDevelopServices/Build';\nimport { uploadBlobFile } from './BrowserFileUploader';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport { findGDJS } from '../../GameEngineFinder/BrowserS3GDJSFinder';\nimport BrowserFileSystem from './BrowserFileSystem';\nimport {\n  type UrlFileDescriptor,\n  type TextFileDescriptor,\n  type BlobFileDescriptor,\n  downloadUrlFilesToBlobFiles,\n  archiveFiles,\n} from '../../Utils/BrowserArchiver';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport {\n  type ExportState,\n  SetupExportHeader,\n  ExportFlow,\n} from '../GenericExporters/OnlineCordovaExport';\n\nconst gd: libGDevelop = global.gd;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  abstractFileSystem: BrowserFileSystem,\n  outputDir: string,\n|};\n\ntype ExportOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  blobFiles: Array<BlobFileDescriptor>,\n|};\n\ntype CompressionOutput = Blob;\n\nconst exportPipelineName = 'browser-online-cordova';\n\nexport const browserOnlineCordovaExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  onlineBuildType: 'cordova-build',\n  limitedBuilds: true,\n  packageNameWarningType: 'mobile',\n\n  getInitialExportState: () => ({\n    targets: ['androidApk'],\n    keystore: 'new',\n    signingDialogOpen: false,\n  }),\n\n  // Build can be launched only if just opened the dialog or build errored.\n  canLaunchBuild: (exportState, errored, exportStep) =>\n    errored || exportStep === '',\n\n  // Navigation is enabled when the build is errored or whilst uploading.\n  isNavigationDisabled: (exportStep, errored) =>\n    !errored &&\n    ['register', 'export', 'resources-download', 'compress', 'upload'].includes(\n      exportStep\n    ),\n\n  renderHeader: props => <SetupExportHeader {...props} />,\n\n  shouldSuggestBumpingVersionNumber: () => true,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS('cordova').then(({ gdjsRoot, filesContent }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const outputDir = '/export/';\n      const abstractFileSystem = new BrowserFileSystem({\n        textFiles: filesContent,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        abstractFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        outputDir,\n        abstractFileSystem,\n      };\n    });\n  },\n\n  launchExport: (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, outputDir, abstractFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const { project } = context;\n    const exportOptions = new gd.ExportOptions(project, outputDir);\n    exportOptions.setTarget('cordova');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return Promise.resolve({\n      textFiles: abstractFileSystem.getAllTextFilesIn(outputDir),\n      urlFiles: abstractFileSystem.getAllUrlFilesIn(outputDir),\n    });\n  },\n\n  launchResourcesDownload: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    return downloadUrlFilesToBlobFiles({\n      urlFiles,\n      onProgress: context.updateStepProgress,\n    }).then(blobFiles => ({\n      blobFiles,\n      textFiles,\n    }));\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, blobFiles }: ResourcesDownloadOutput\n  ): Promise<Blob> => {\n    return archiveFiles({\n      blobFiles,\n      textFiles,\n      basePath: '/export/',\n      onProgress: context.updateStepProgress,\n    });\n  },\n\n  launchUpload: (\n    context: ExportPipelineContext<ExportState>,\n    blobFile: Blob\n  ): Promise<string> => {\n    return getBuildFileUploadOptions().then(uploadOptions => {\n      return uploadBlobFile(\n        blobFile,\n        uploadOptions,\n        context.updateStepProgress\n      ).then(() => uploadOptions.key);\n    });\n  },\n\n  launchOnlineBuild: (\n    exportState: ExportState,\n    authenticatedUser: AuthenticatedUser,\n    uploadBucketKey: string,\n    gameId: string,\n    options: {|\n      gameName: string,\n      gameVersion: string,\n    |},\n    payWithCredits: boolean\n  ): Promise<Build> => {\n    const { getAuthorizationHeader, firebaseUser } = authenticatedUser;\n    if (!firebaseUser)\n      return Promise.reject(new Error('User is not authenticated'));\n\n    return buildCordovaAndroid(\n      getAuthorizationHeader,\n      firebaseUser.uid,\n      uploadBucketKey,\n      exportState.targets,\n      exportState.keystore,\n      gameId,\n      options,\n      payWithCredits\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type Build,\n  buildCordovaIos,\n  getBuildFileUploadOptions,\n} from '../../Utils/GDevelopServices/Build';\nimport { uploadBlobFile } from './BrowserFileUploader';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport { findGDJS } from '../../GameEngineFinder/BrowserS3GDJSFinder';\nimport BrowserFileSystem from './BrowserFileSystem';\nimport {\n  type UrlFileDescriptor,\n  type TextFileDescriptor,\n  type BlobFileDescriptor,\n  downloadUrlFilesToBlobFiles,\n  archiveFiles,\n} from '../../Utils/BrowserArchiver';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport {\n  type ExportState,\n  SetupExportHeader,\n  ExportFlow,\n} from '../GenericExporters/OnlineCordovaIosExport';\n\nconst gd: libGDevelop = global.gd;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  abstractFileSystem: BrowserFileSystem,\n  outputDir: string,\n|};\n\ntype ExportOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  blobFiles: Array<BlobFileDescriptor>,\n|};\n\ntype CompressionOutput = Blob;\n\nconst exportPipelineName = 'browser-online-cordova-ios';\n\nexport const browserOnlineCordovaIosExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  onlineBuildType: 'cordova-ios-build',\n  limitedBuilds: true,\n  packageNameWarningType: 'mobile',\n\n  getInitialExportState: () => ({\n    targets: ['iosAppStore'],\n    signing: null,\n  }),\n\n  // Build can be launched only if just opened the dialog or build errored.\n  canLaunchBuild: (exportState, errored, exportStep) =>\n    (errored || exportStep === '') && !!exportState.signing,\n\n  // Navigation is enabled when the build is errored or whilst uploading.\n  isNavigationDisabled: (exportStep, errored) =>\n    !errored &&\n    ['register', 'export', 'resources-download', 'compress', 'upload'].includes(\n      exportStep\n    ),\n\n  renderHeader: props => <SetupExportHeader {...props} />,\n\n  shouldSuggestBumpingVersionNumber: () => true,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS('cordova').then(({ gdjsRoot, filesContent }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const outputDir = '/export/';\n      const abstractFileSystem = new BrowserFileSystem({\n        textFiles: filesContent,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        abstractFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        outputDir,\n        abstractFileSystem,\n      };\n    });\n  },\n\n  launchExport: (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, outputDir, abstractFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const { project } = context;\n    const exportOptions = new gd.ExportOptions(project, outputDir);\n    exportOptions.setTarget('cordova');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return Promise.resolve({\n      textFiles: abstractFileSystem.getAllTextFilesIn(outputDir),\n      urlFiles: abstractFileSystem.getAllUrlFilesIn(outputDir),\n    });\n  },\n\n  launchResourcesDownload: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    return downloadUrlFilesToBlobFiles({\n      urlFiles,\n      onProgress: context.updateStepProgress,\n    }).then(blobFiles => ({\n      blobFiles,\n      textFiles,\n    }));\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, blobFiles }: ResourcesDownloadOutput\n  ): Promise<Blob> => {\n    return archiveFiles({\n      blobFiles,\n      textFiles,\n      basePath: '/export/',\n      onProgress: context.updateStepProgress,\n    });\n  },\n\n  launchUpload: (\n    context: ExportPipelineContext<ExportState>,\n    blobFile: Blob\n  ): Promise<string> => {\n    return getBuildFileUploadOptions().then(uploadOptions => {\n      return uploadBlobFile(\n        blobFile,\n        uploadOptions,\n        context.updateStepProgress\n      ).then(() => uploadOptions.key);\n    });\n  },\n\n  launchOnlineBuild: (\n    exportState: ExportState,\n    authenticatedUser: AuthenticatedUser,\n    uploadBucketKey: string,\n    gameId: string,\n    options: {|\n      gameName: string,\n      gameVersion: string,\n    |},\n    payWithCredits: boolean\n  ): Promise<Build> => {\n    const { getAuthorizationHeader, profile } = authenticatedUser;\n    if (!profile) return Promise.reject(new Error('User is not authenticated'));\n    if (!exportState.signing)\n      return Promise.reject(new Error('Signing options not set up'));\n\n    return buildCordovaIos(\n      getAuthorizationHeader,\n      profile.id,\n      uploadBucketKey,\n      exportState.targets,\n      exportState.signing,\n      gameId,\n      options,\n      payWithCredits\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type Build,\n  buildElectron,\n  getBuildFileUploadOptions,\n} from '../../Utils/GDevelopServices/Build';\nimport { uploadBlobFile } from './BrowserFileUploader';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport { findGDJS } from '../../GameEngineFinder/BrowserS3GDJSFinder';\nimport BrowserFileSystem from './BrowserFileSystem';\nimport {\n  type UrlFileDescriptor,\n  type TextFileDescriptor,\n  type BlobFileDescriptor,\n  downloadUrlFilesToBlobFiles,\n  archiveFiles,\n} from '../../Utils/BrowserArchiver';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport {\n  type ExportState,\n  SetupExportHeader,\n  ExportFlow,\n} from '../GenericExporters/OnlineElectronExport';\n\nconst gd: libGDevelop = global.gd;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  abstractFileSystem: BrowserFileSystem,\n  outputDir: string,\n|};\n\ntype ExportOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  blobFiles: Array<BlobFileDescriptor>,\n|};\n\ntype CompressionOutput = Blob;\n\nconst exportPipelineName = 'browser-online-electron';\n\nexport const browserOnlineElectronExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  onlineBuildType: 'electron-build',\n  limitedBuilds: true,\n  packageNameWarningType: 'desktop',\n\n  getInitialExportState: () => ({\n    targets: ['winExe'],\n  }),\n\n  // Build can be launched only if just opened the dialog or build errored.\n  canLaunchBuild: (exportState, errored, exportStep) =>\n    !!exportState.targets.length && (errored || exportStep === ''),\n\n  // Navigation is enabled when the build is errored or whilst uploading.\n  isNavigationDisabled: (exportStep, errored) =>\n    !errored &&\n    ['register', 'export', 'resources-download', 'compress', 'upload'].includes(\n      exportStep\n    ),\n\n  renderHeader: props => <SetupExportHeader {...props} />,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS('electron').then(({ gdjsRoot, filesContent }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const outputDir = '/export/';\n      const abstractFileSystem = new BrowserFileSystem({\n        textFiles: filesContent,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        abstractFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        outputDir,\n        abstractFileSystem,\n      };\n    });\n  },\n\n  launchExport: (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, outputDir, abstractFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const { project } = context;\n    const exportOptions = new gd.ExportOptions(project, outputDir);\n    exportOptions.setTarget('electron');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return Promise.resolve({\n      textFiles: abstractFileSystem.getAllTextFilesIn(outputDir),\n      urlFiles: abstractFileSystem.getAllUrlFilesIn(outputDir),\n    });\n  },\n\n  launchResourcesDownload: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    return downloadUrlFilesToBlobFiles({\n      urlFiles,\n      onProgress: context.updateStepProgress,\n    }).then(blobFiles => ({\n      blobFiles,\n      textFiles,\n    }));\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, blobFiles }: ResourcesDownloadOutput\n  ): Promise<Blob> => {\n    return archiveFiles({\n      blobFiles,\n      textFiles,\n      basePath: '/export/',\n      onProgress: context.updateStepProgress,\n    });\n  },\n\n  launchUpload: (\n    context: ExportPipelineContext<ExportState>,\n    blobFile: Blob\n  ): Promise<string> => {\n    return getBuildFileUploadOptions().then(uploadOptions => {\n      return uploadBlobFile(\n        blobFile,\n        uploadOptions,\n        context.updateStepProgress\n      ).then(() => uploadOptions.key);\n    });\n  },\n\n  launchOnlineBuild: (\n    exportState: ExportState,\n    authenticatedUser: AuthenticatedUser,\n    uploadBucketKey: string,\n    gameId: string,\n    options: {|\n      gameName: string,\n      gameVersion: string,\n    |},\n    payWithCredits: boolean\n  ): Promise<Build> => {\n    const { getAuthorizationHeader, firebaseUser } = authenticatedUser;\n    if (!firebaseUser)\n      return Promise.reject(new Error('User is not authenticated'));\n\n    return buildElectron(\n      getAuthorizationHeader,\n      firebaseUser.uid,\n      uploadBucketKey,\n      exportState.targets,\n      gameId,\n      options,\n      payWithCredits\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport assignIn from 'lodash/assignIn';\nimport {\n  type Build,\n  buildWeb,\n  getBuildFileUploadOptions,\n} from '../../Utils/GDevelopServices/Build';\nimport { uploadBlobFile } from './BrowserFileUploader';\nimport { type AuthenticatedUser } from '../../Profile/AuthenticatedUserContext';\nimport { findGDJS } from '../../GameEngineFinder/BrowserS3GDJSFinder';\nimport BrowserFileSystem from './BrowserFileSystem';\nimport {\n  type UrlFileDescriptor,\n  type TextFileDescriptor,\n  type BlobFileDescriptor,\n  downloadUrlFilesToBlobFiles,\n  archiveFiles,\n} from '../../Utils/BrowserArchiver';\nimport {\n  type ExportPipeline,\n  type ExportPipelineContext,\n  type ExportFlowProps,\n} from '../ExportPipeline.flow';\nimport { ExplanationHeader } from '../GenericExporters/OnlineWebExport';\nimport OnlineWebExportFlow from '../GenericExporters/OnlineWebExport/OnlineWebExportFlow';\n\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = null;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  abstractFileSystem: BrowserFileSystem,\n  outputDir: string,\n|};\n\ntype ExportOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  blobFiles: Array<BlobFileDescriptor>,\n|};\n\ntype CompressionOutput = Blob;\n\nconst exportPipelineName = 'browser-online-web';\n\nexport const browserOnlineWebExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  onlineBuildType: 'web-build',\n\n  getInitialExportState: () => null,\n\n  // Build can be launched if just opened the dialog or build errored, re-enabled when done.\n  canLaunchBuild: (exportState, errored, exportStep) =>\n    errored || exportStep === '' || exportStep === 'done',\n\n  // Navigation is enabled when the build is errored or if the build is not done.\n  isNavigationDisabled: (exportStep, errored) =>\n    !errored && !['', 'done'].includes(exportStep),\n\n  renderHeader: ({ uiMode }) => <ExplanationHeader uiMode={uiMode} />,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <OnlineWebExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS('web').then(({ gdjsRoot, filesContent }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const outputDir = '/export/';\n      const abstractFileSystem = new BrowserFileSystem({\n        textFiles: filesContent,\n      });\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        abstractFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        outputDir,\n        abstractFileSystem,\n      };\n    });\n  },\n\n  launchExport: (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, outputDir, abstractFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const { project } = context;\n    const exportOptions = new gd.ExportOptions(project, outputDir);\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return Promise.resolve({\n      textFiles: abstractFileSystem.getAllTextFilesIn(outputDir),\n      urlFiles: abstractFileSystem.getAllUrlFilesIn(outputDir),\n    });\n  },\n\n  launchResourcesDownload: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    return downloadUrlFilesToBlobFiles({\n      urlFiles,\n      onProgress: context.updateStepProgress,\n    }).then(blobFiles => ({\n      blobFiles,\n      textFiles,\n    }));\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, blobFiles }: ResourcesDownloadOutput\n  ): Promise<Blob> => {\n    return archiveFiles({\n      blobFiles,\n      textFiles,\n      basePath: '/export/',\n      onProgress: context.updateStepProgress,\n      sizeLimit: 250 * 1000 * 1000,\n    });\n  },\n\n  launchUpload: (\n    context: ExportPipelineContext<ExportState>,\n    blobFile: Blob\n  ): Promise<string> => {\n    return getBuildFileUploadOptions().then(uploadOptions => {\n      return uploadBlobFile(\n        blobFile,\n        uploadOptions,\n        context.updateStepProgress\n      ).then(() => uploadOptions.key);\n    });\n  },\n\n  launchOnlineBuild: (\n    exportState: ExportState,\n    authenticatedUser: AuthenticatedUser,\n    uploadBucketKey: string,\n    gameId: string,\n    options: {|\n      gameName: string,\n      gameVersion: string,\n    |},\n    payWithCredits: boolean\n  ): Promise<Build> => {\n    const { getAuthorizationHeader, firebaseUser } = authenticatedUser;\n    if (!firebaseUser)\n      return Promise.reject(new Error('User is not authenticated'));\n\n    return buildWeb(\n      getAuthorizationHeader,\n      firebaseUser.uid,\n      uploadBucketKey,\n      gameId,\n      options,\n      payWithCredits\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport assignIn from 'lodash/assignIn';\nimport { findGDJS } from '../../GameEngineFinder/BrowserS3GDJSFinder';\nimport BrowserFileSystem from './BrowserFileSystem';\nimport {\n  type UrlFileDescriptor,\n  type TextFileDescriptor,\n  type BlobFileDescriptor,\n  downloadUrlFilesToBlobFiles,\n  archiveFiles,\n} from '../../Utils/BrowserArchiver';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport RaisedButton from '../../UI/RaisedButton';\nimport {\n  BlobDownloadUrlHolder,\n  openBlobDownloadUrl,\n} from '../../Utils/BlobDownloadUrlHolder';\nimport {\n  ExplanationHeader,\n  DoneFooter,\n  ExportFlow,\n} from '../GenericExporters/HTML5Export';\n\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = null;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  abstractFileSystem: BrowserFileSystem,\n  outputDir: string,\n|};\n\ntype ExportOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  blobFiles: Array<BlobFileDescriptor>,\n|};\n\ntype CompressionOutput = Blob;\n\nconst exportPipelineName = 'browser-html5';\n\nexport const browserHTML5ExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n\n  getInitialExportState: () => null,\n\n  canLaunchBuild: () => true,\n\n  isNavigationDisabled: () => false,\n\n  renderHeader: () => <ExplanationHeader />,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS('web').then(({ gdjsRoot, filesContent }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const outputDir = '/export/';\n      const abstractFileSystem = new BrowserFileSystem({\n        textFiles: filesContent,\n      });\n      // TODO: Memory leak? Check for other exporters too.\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        abstractFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        outputDir,\n        abstractFileSystem,\n      };\n    });\n  },\n\n  launchExport: (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, outputDir, abstractFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const { project } = context;\n    const exportOptions = new gd.ExportOptions(project, outputDir);\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return Promise.resolve({\n      textFiles: abstractFileSystem.getAllTextFilesIn(outputDir),\n      urlFiles: abstractFileSystem.getAllUrlFilesIn(outputDir),\n    });\n  },\n\n  launchResourcesDownload: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    return downloadUrlFilesToBlobFiles({\n      urlFiles,\n      onProgress: context.updateStepProgress,\n    }).then(blobFiles => ({\n      blobFiles,\n      textFiles,\n    }));\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, blobFiles }: ResourcesDownloadOutput\n  ): Promise<Blob> => {\n    return archiveFiles({\n      blobFiles,\n      textFiles,\n      basePath: '/export/',\n      onProgress: context.updateStepProgress,\n    });\n  },\n\n  renderDoneFooter: ({ compressionOutput, exportState }) => {\n    return (\n      <DoneFooter\n        renderGameButton={() => (\n          <BlobDownloadUrlHolder blob={compressionOutput}>\n            {blobDownloadUrl => (\n              <RaisedButton\n                primary\n                onClick={() => openBlobDownloadUrl(blobDownloadUrl, 'game.zip')}\n                label={<Trans>Download the exported game</Trans>}\n              />\n            )}\n          </BlobDownloadUrlHolder>\n        )}\n      />\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport assignIn from 'lodash/assignIn';\nimport { findGDJS } from '../../GameEngineFinder/BrowserS3GDJSFinder';\nimport BrowserFileSystem from './BrowserFileSystem';\nimport {\n  type UrlFileDescriptor,\n  type TextFileDescriptor,\n  type BlobFileDescriptor,\n  downloadUrlFilesToBlobFiles,\n  archiveFiles,\n} from '../../Utils/BrowserArchiver';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport RaisedButton from '../../UI/RaisedButton';\nimport {\n  BlobDownloadUrlHolder,\n  openBlobDownloadUrl,\n} from '../../Utils/BlobDownloadUrlHolder';\nimport {\n  ExplanationHeader,\n  DoneFooter,\n  ExportFlow,\n} from '../GenericExporters/CordovaExport';\n\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = null;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  abstractFileSystem: BrowserFileSystem,\n  outputDir: string,\n|};\n\ntype ExportOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  blobFiles: Array<BlobFileDescriptor>,\n|};\n\ntype CompressionOutput = Blob;\n\nconst exportPipelineName = 'browser-cordova';\n\nexport const browserCordovaExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  packageNameWarningType: 'mobile',\n\n  getInitialExportState: () => null,\n\n  canLaunchBuild: () => true,\n\n  isNavigationDisabled: () => false,\n\n  renderHeader: () => <ExplanationHeader />,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS('cordova').then(({ gdjsRoot, filesContent }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const outputDir = '/export/';\n      const abstractFileSystem = new BrowserFileSystem({\n        textFiles: filesContent,\n      });\n      // TODO: Memory leak? Check for other exporters too.\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        abstractFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        outputDir,\n        abstractFileSystem,\n      };\n    });\n  },\n\n  launchExport: (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, outputDir, abstractFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const { project } = context;\n    const exportOptions = new gd.ExportOptions(project, outputDir);\n    exportOptions.setTarget('cordova');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return Promise.resolve({\n      textFiles: abstractFileSystem.getAllTextFilesIn(outputDir),\n      urlFiles: abstractFileSystem.getAllUrlFilesIn(outputDir),\n    });\n  },\n\n  launchResourcesDownload: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    return downloadUrlFilesToBlobFiles({\n      urlFiles,\n      onProgress: context.updateStepProgress,\n    }).then(blobFiles => ({\n      blobFiles,\n      textFiles,\n    }));\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, blobFiles }: ResourcesDownloadOutput\n  ): Promise<Blob> => {\n    return archiveFiles({\n      blobFiles,\n      textFiles,\n      basePath: '/export/',\n      onProgress: context.updateStepProgress,\n    });\n  },\n\n  renderDoneFooter: ({ compressionOutput, exportState }) => {\n    return (\n      <DoneFooter\n        renderGameButton={() => (\n          <BlobDownloadUrlHolder blob={compressionOutput}>\n            {blobDownloadUrl => (\n              <RaisedButton\n                primary\n                onClick={() => openBlobDownloadUrl(blobDownloadUrl, 'game.zip')}\n                label={<Trans>Download the exported game</Trans>}\n              />\n            )}\n          </BlobDownloadUrlHolder>\n        )}\n      />\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport assignIn from 'lodash/assignIn';\nimport { findGDJS } from '../../GameEngineFinder/BrowserS3GDJSFinder';\nimport BrowserFileSystem from './BrowserFileSystem';\nimport {\n  type UrlFileDescriptor,\n  type TextFileDescriptor,\n  type BlobFileDescriptor,\n  downloadUrlFilesToBlobFiles,\n  archiveFiles,\n} from '../../Utils/BrowserArchiver';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport RaisedButton from '../../UI/RaisedButton';\nimport {\n  BlobDownloadUrlHolder,\n  openBlobDownloadUrl,\n} from '../../Utils/BlobDownloadUrlHolder';\nimport {\n  ExplanationHeader,\n  DoneFooter,\n  ExportFlow,\n} from '../GenericExporters/ElectronExport';\n\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = null;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  abstractFileSystem: BrowserFileSystem,\n  outputDir: string,\n|};\n\ntype ExportOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  blobFiles: Array<BlobFileDescriptor>,\n|};\n\ntype CompressionOutput = Blob;\n\nconst exportPipelineName = 'browser-electron';\n\nexport const browserElectronExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n  packageNameWarningType: 'desktop',\n\n  getInitialExportState: () => null,\n\n  canLaunchBuild: () => true,\n\n  isNavigationDisabled: () => false,\n\n  renderHeader: () => <ExplanationHeader />,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS('electron').then(({ gdjsRoot, filesContent }) => {\n      console.info('GDJS found in ', gdjsRoot);\n\n      const outputDir = '/export/';\n      const abstractFileSystem = new BrowserFileSystem({\n        textFiles: filesContent,\n      });\n      // TODO: Memory leak? Check for other exporters too.\n      const fileSystem = assignIn(\n        new gd.AbstractFileSystemJS(),\n        abstractFileSystem\n      );\n      const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n      return {\n        exporter,\n        outputDir,\n        abstractFileSystem,\n      };\n    });\n  },\n\n  launchExport: (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, outputDir, abstractFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const { project } = context;\n    const exportOptions = new gd.ExportOptions(project, outputDir);\n    exportOptions.setTarget('electron');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return Promise.resolve({\n      textFiles: abstractFileSystem.getAllTextFilesIn(outputDir),\n      urlFiles: abstractFileSystem.getAllUrlFilesIn(outputDir),\n    });\n  },\n\n  launchResourcesDownload: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    return downloadUrlFilesToBlobFiles({\n      urlFiles,\n      onProgress: context.updateStepProgress,\n    }).then(blobFiles => ({\n      blobFiles,\n      textFiles,\n    }));\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, blobFiles }: ResourcesDownloadOutput\n  ): Promise<Blob> => {\n    return archiveFiles({\n      blobFiles,\n      textFiles,\n      basePath: '/export/',\n      onProgress: context.updateStepProgress,\n    });\n  },\n\n  renderDoneFooter: ({ compressionOutput, exportState }) => {\n    return (\n      <DoneFooter\n        renderGameButton={() => (\n          <BlobDownloadUrlHolder blob={compressionOutput}>\n            {blobDownloadUrl => (\n              <RaisedButton\n                primary\n                onClick={() => openBlobDownloadUrl(blobDownloadUrl, 'game.zip')}\n                label={<Trans>Download the exported game</Trans>}\n              />\n            )}\n          </BlobDownloadUrlHolder>\n        )}\n      />\n    );\n  },\n};\n","// @flow\nimport * as React from 'react';\nimport { Trans } from '@lingui/macro';\nimport assignIn from 'lodash/assignIn';\nimport { findGDJS } from '../../GameEngineFinder/BrowserS3GDJSFinder';\nimport BrowserFileSystem from './BrowserFileSystem';\nimport {\n  type UrlFileDescriptor,\n  type TextFileDescriptor,\n  type BlobFileDescriptor,\n  downloadUrlFilesToBlobFiles,\n  archiveFiles,\n} from '../../Utils/BrowserArchiver';\nimport {\n  type ExportFlowProps,\n  type ExportPipeline,\n  type ExportPipelineContext,\n} from '../ExportPipeline.flow';\nimport RaisedButton from '../../UI/RaisedButton';\nimport {\n  BlobDownloadUrlHolder,\n  openBlobDownloadUrl,\n} from '../../Utils/BlobDownloadUrlHolder';\nimport {\n  ExplanationHeader,\n  DoneFooter,\n  ExportFlow,\n} from '../GenericExporters/FacebookInstantGamesExport';\n\nconst gd: libGDevelop = global.gd;\n\ntype ExportState = null;\n\ntype PreparedExporter = {|\n  exporter: gdjsExporter,\n  abstractFileSystem: BrowserFileSystem,\n  outputDir: string,\n|};\n\ntype ExportOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  urlFiles: Array<UrlFileDescriptor>,\n|};\n\ntype ResourcesDownloadOutput = {|\n  textFiles: Array<TextFileDescriptor>,\n  blobFiles: Array<BlobFileDescriptor>,\n|};\n\ntype CompressionOutput = Blob;\n\nconst exportPipelineName = 'browser-facebook-instant-games';\n\nexport const browserFacebookInstantGamesExportPipeline: ExportPipeline<\n  ExportState,\n  PreparedExporter,\n  ExportOutput,\n  ResourcesDownloadOutput,\n  CompressionOutput\n> = {\n  name: exportPipelineName,\n\n  getInitialExportState: () => null,\n\n  canLaunchBuild: () => true,\n\n  isNavigationDisabled: () => false,\n\n  renderHeader: () => <ExplanationHeader />,\n\n  renderExportFlow: (props: ExportFlowProps) => (\n    <ExportFlow {...props} exportPipelineName={exportPipelineName} />\n  ),\n\n  prepareExporter: (\n    context: ExportPipelineContext<ExportState>\n  ): Promise<PreparedExporter> => {\n    return findGDJS('facebook-instant-games').then(\n      ({ gdjsRoot, filesContent }) => {\n        console.info('GDJS found in ', gdjsRoot);\n\n        const outputDir = '/export/';\n        const abstractFileSystem = new BrowserFileSystem({\n          textFiles: filesContent,\n        });\n        // TODO: Memory leak? Check for other exporters too.\n        const fileSystem = assignIn(\n          new gd.AbstractFileSystemJS(),\n          abstractFileSystem\n        );\n        const exporter = new gd.Exporter(fileSystem, gdjsRoot);\n\n        return {\n          exporter,\n          outputDir,\n          abstractFileSystem,\n        };\n      }\n    );\n  },\n\n  launchExport: (\n    context: ExportPipelineContext<ExportState>,\n    { exporter, outputDir, abstractFileSystem }: PreparedExporter,\n    fallbackAuthor: ?{ id: string, username: string }\n  ): Promise<ExportOutput> => {\n    const { project } = context;\n    const exportOptions = new gd.ExportOptions(project, outputDir);\n    exportOptions.setTarget('facebookInstantGames');\n    if (fallbackAuthor) {\n      exportOptions.setFallbackAuthor(\n        fallbackAuthor.id,\n        fallbackAuthor.username\n      );\n    }\n    exporter.exportWholePixiProject(exportOptions);\n    exportOptions.delete();\n    exporter.delete();\n\n    return Promise.resolve({\n      textFiles: abstractFileSystem.getAllTextFilesIn(outputDir),\n      urlFiles: abstractFileSystem.getAllUrlFilesIn(outputDir),\n    });\n  },\n\n  launchResourcesDownload: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, urlFiles }: ExportOutput\n  ): Promise<ResourcesDownloadOutput> => {\n    return downloadUrlFilesToBlobFiles({\n      urlFiles,\n      onProgress: context.updateStepProgress,\n    }).then(blobFiles => ({\n      blobFiles,\n      textFiles,\n    }));\n  },\n\n  launchCompression: (\n    context: ExportPipelineContext<ExportState>,\n    { textFiles, blobFiles }: ResourcesDownloadOutput\n  ): Promise<Blob> => {\n    return archiveFiles({\n      blobFiles,\n      textFiles,\n      basePath: '/export/',\n      onProgress: context.updateStepProgress,\n    });\n  },\n\n  renderDoneFooter: ({ compressionOutput, exportState }) => {\n    return (\n      <DoneFooter\n        renderGameButton={() => (\n          <BlobDownloadUrlHolder blob={compressionOutput}>\n            {blobDownloadUrl => (\n              <RaisedButton\n                primary\n                onClick={() =>\n                  openBlobDownloadUrl(blobDownloadUrl, 'fb-instant-game.zip')\n                }\n                label={<Trans>Download the Instant Game archive</Trans>}\n              />\n            )}\n          </BlobDownloadUrlHolder>\n        )}\n      />\n    );\n  },\n};\n","// @flow\nimport { type Exporter } from '../ShareDialog';\nimport { browserOnlineCordovaExportPipeline } from './BrowserOnlineCordovaExport';\nimport { browserOnlineCordovaIosExportPipeline } from './BrowserOnlineCordovaIosExport';\nimport { browserOnlineElectronExportPipeline } from './BrowserOnlineElectronExport';\nimport { browserOnlineWebExportPipeline } from './BrowserOnlineWebExport';\nimport { browserHTML5ExportPipeline } from './BrowserHTML5Export';\nimport { browserCordovaExportPipeline } from './BrowserCordovaExport';\nimport { browserElectronExportPipeline } from './BrowserElectronExport';\nimport { browserFacebookInstantGamesExportPipeline } from './BrowserFacebookInstantGamesExport';\nimport { cordovaExporter } from '../GenericExporters/CordovaExport';\nimport { onlineWebExporter } from '../GenericExporters/OnlineWebExport';\nimport { html5Exporter } from '../GenericExporters/HTML5Export';\nimport { facebookInstantGamesExporter } from '../GenericExporters/FacebookInstantGamesExport';\nimport { onlineCordovaExporter } from '../GenericExporters/OnlineCordovaExport';\nimport { onlineCordovaIosExporter } from '../GenericExporters/OnlineCordovaIosExport';\nimport { onlineElectronExporter } from '../GenericExporters/OnlineElectronExport';\nimport { electronExporter } from '../GenericExporters/ElectronExport';\n\nexport const browserOnlineWebExporter: Exporter = {\n  ...onlineWebExporter,\n  exportPipeline: browserOnlineWebExportPipeline,\n};\n\nexport const browserAutomatedExporters: Array<Exporter> = [\n  {\n    ...html5Exporter,\n    exportPipeline: browserHTML5ExportPipeline,\n  },\n  {\n    ...onlineCordovaExporter,\n    exportPipeline: browserOnlineCordovaExportPipeline,\n  },\n  {\n    ...onlineCordovaIosExporter,\n    exportPipeline: browserOnlineCordovaIosExportPipeline,\n  },\n  {\n    ...onlineElectronExporter,\n    exportPipeline: browserOnlineElectronExportPipeline,\n  },\n  {\n    ...facebookInstantGamesExporter,\n    exportPipeline: browserFacebookInstantGamesExportPipeline,\n  },\n];\n\nexport const browserManualExporters: Array<Exporter> = [\n  {\n    ...html5Exporter,\n    exportPipeline: browserHTML5ExportPipeline,\n  },\n  {\n    ...cordovaExporter,\n    exportPipeline: browserCordovaExportPipeline,\n  },\n  {\n    ...electronExporter,\n    exportPipeline: browserElectronExportPipeline,\n  },\n];\n","// @flow\nimport {\n  type JsExtensionsLoader,\n  type ExtensionLoadingResult,\n  type TranslationFunction,\n  loadExtension,\n} from '.';\nimport ObjectsEditorService from '../ObjectEditor/ObjectsEditorService';\nimport ObjectsRenderingService from '../ObjectsRendering/ObjectsRenderingService';\nconst gd: libGDevelop = global.gd;\n\n// The list of \"JsExtension.js\" files to be bundled in the webapp, keyed by their extension name.\nconst jsExtensions = [\n  {\n    name: 'AdMob',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/AdMob/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'AdvancedWindow',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/AdvancedWindow/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'FacebookInstantGames',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/FacebookInstantGames/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'DeviceSensors',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/DeviceSensors/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'DeviceVibration',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/DeviceVibration/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'DebuggerTools',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/DebuggerTools/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'Physics2',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/Physics2Behavior/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'ExampleJsExtension',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/ExampleJsExtension/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'Tween',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/TweenBehavior/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'Video',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/Video/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'FileSystem',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/FileSystem/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'Firebase',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/Firebase/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'Leaderboards',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/Leaderboards/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'PlayerAuthentication',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/PlayerAuthentication/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'Multiplayer',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/Multiplayer/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'DialogueTree',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/DialogueTree/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'BBText',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/BBText/JsExtension.js'),\n    objectsRenderingServiceModules: {\n      // $FlowExpectedError - this path is ignored for Flow.\n      'pixi-multistyle-text/dist/pixi-multistyle-text.umd': require('GDJS-for-web-app-only/Runtime/Extensions/BBText/pixi-multistyle-text/dist/pixi-multistyle-text.umd'),\n    },\n  },\n  {\n    name: 'TileMap',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/TileMap/JsExtension.js'),\n    objectsRenderingServiceModules: {\n      // $FlowExpectedError - this path is ignored for Flow.\n      'pixi-tilemap/dist/pixi-tilemap.umd': require('GDJS-for-web-app-only/Runtime/Extensions/TileMap/pixi-tilemap/dist/pixi-tilemap.umd'),\n      // $FlowExpectedError - this path is ignored for Flow.\n      'helper/TileMapHelper': require('GDJS-for-web-app-only/Runtime/Extensions/TileMap/helper/TileMapHelper.js'),\n      // $FlowExpectedError - this path is ignored for Flow.\n      'pako/dist/pako.min': require('GDJS-for-web-app-only/Runtime/Extensions/TileMap/pako/dist/pako.min'),\n    },\n  },\n  {\n    name: 'Effects',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/Effects/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'P2P',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/P2P/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'Lighting',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/Lighting/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'SpatialSound',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/SpatialSound/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'BitmapText',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/BitmapText/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'Screenshot',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/Screenshot/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'TextInput',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/TextInput/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'Scene3D',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/3D/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n  {\n    name: 'SpineObject',\n    // $FlowExpectedError - this path is ignored for Flow.\n    extensionModule: require('GDJS-for-web-app-only/Runtime/Extensions/Spine/JsExtension.js'),\n    objectsRenderingServiceModules: {},\n  },\n];\n\ntype MakeExtensionsLoaderArguments = {|\n  objectsEditorService: typeof ObjectsEditorService,\n  objectsRenderingService: typeof ObjectsRenderingService,\n  filterExamples: boolean,\n|};\n\n/**\n * Loader that load all JS extensions required in this file.\n * Extensions are usually auto-discovered when declared in Extensions/xxx/JsExtension.js, but not\n * for the web-app where everything must be bundled.\n */\nexport default function makeExtensionsLoader({\n  objectsEditorService,\n  objectsRenderingService,\n  filterExamples,\n}: MakeExtensionsLoaderArguments): JsExtensionsLoader {\n  return {\n    loadAllExtensions(\n      _: TranslationFunction\n    ): Promise<\n      Array<{ extensionModulePath: string, result: ExtensionLoadingResult }>\n    > {\n      return Promise.resolve(\n        jsExtensions\n          .filter(({ name }) => !filterExamples || !name.includes('Example'))\n          .map(({ name, extensionModule, objectsRenderingServiceModules }) => {\n            if (\n              objectsEditorService &&\n              extensionModule.registerEditorConfigurations\n            ) {\n              extensionModule.registerEditorConfigurations(\n                objectsEditorService\n              );\n            }\n\n            if (objectsRenderingService) {\n              if (objectsRenderingServiceModules) {\n                for (const requirePath in objectsRenderingServiceModules) {\n                  objectsRenderingService.registerModule(\n                    requirePath,\n                    objectsRenderingServiceModules[requirePath]\n                  );\n                }\n              }\n              if (extensionModule.registerInstanceRenderers) {\n                extensionModule.registerInstanceRenderers(\n                  objectsRenderingService\n                );\n              }\n              if (extensionModule.registerClearCache) {\n                extensionModule.registerClearCache(objectsRenderingService);\n              }\n            }\n\n            return {\n              extensionModulePath: 'internal-extension://' + name,\n              result: loadExtension(\n                _,\n                gd,\n                gd.JsPlatform.get(),\n                extensionModule\n              ),\n            };\n          })\n      );\n    },\n  };\n}\n","// @flow\nimport {\n  type EventsFunctionCodeWriter,\n  type EventsFunctionCodeWriterCallbacks,\n} from '..';\nimport { uploadObject, getBaseUrl } from '../../Utils/GDevelopServices/Preview';\nimport { makeTimestampedId } from '../../Utils/TimestampedId';\nimport slugs from 'slugs';\n\n/**\n * Create the EventsFunctionCodeWriter that writes generated code for events functions\n * to temporary S3 files.\n */\nexport const makeBrowserS3EventsFunctionCodeWriter = ({\n  onWriteFile,\n}: EventsFunctionCodeWriterCallbacks): EventsFunctionCodeWriter => {\n  const prefix = makeTimestampedId();\n  const getPathFor = (codeNamespace: string) => {\n    return `${prefix}/${slugs(codeNamespace)}.js`;\n  };\n\n  return {\n    getIncludeFileFor: (codeNamespace: string) =>\n      getBaseUrl() + getPathFor(codeNamespace),\n    writeFunctionCode: (\n      functionCodeNamespace: string,\n      code: string\n    ): Promise<void> => {\n      const key = getPathFor(functionCodeNamespace);\n      onWriteFile({ includeFile: key, content: code });\n      console.log(`Uploading function generated code to ${key}...`);\n      return uploadObject({\n        Key: getPathFor(functionCodeNamespace),\n        Body: code,\n        ContentType: 'text/javascript',\n      });\n    },\n    writeBehaviorCode: (\n      behaviorCodeNamespace: string,\n      code: string\n    ): Promise<void> => {\n      const key = getPathFor(behaviorCodeNamespace);\n      onWriteFile({ includeFile: key, content: code });\n      console.log(`Uploading behavior generated code to ${key}...`);\n      return uploadObject({\n        Key: getPathFor(behaviorCodeNamespace),\n        Body: code,\n        ContentType: 'text/javascript',\n      });\n    },\n    writeObjectCode: (\n      objectCodeNamespace: string,\n      code: string\n    ): Promise<void> => {\n      const key = getPathFor(objectCodeNamespace);\n      onWriteFile({ includeFile: key, content: code });\n      console.log(`Uploading object generated code to ${key}...`);\n      return uploadObject({\n        Key: getPathFor(objectCodeNamespace),\n        Body: code,\n        ContentType: 'text/javascript',\n      });\n    },\n  };\n};\n","import React from 'react';\nimport SvgIcon from '@material-ui/core/SvgIcon';\n\nexport default React.memo(props => (\n  <SvgIcon {...props}>\n    <path d=\"M7.71,3.5L1.15,15L4.58,21L11.13,9.5M9.73,15L6.3,21H19.42L22.85,15M22.28,14L15.42,2H8.58L8.57,2L15.43,14H22.28Z\" />\n  </SvgIcon>\n));\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport RaisedButton from '../../UI/RaisedButton';\nimport TextField from '../../UI/TextField';\nimport { type GoogleDriveFileOrFolder } from '.';\n\ntype Props = {|\n  floatingLabelText: React.Node,\n  value: ?GoogleDriveFileOrFolder,\n  onOpenPicker: () => void,\n|};\n\nconst styles = {\n  container: {\n    position: 'relative',\n    display: 'flex',\n    alignItems: 'baseline',\n    width: '100%',\n  },\n  button: {\n    marginLeft: 10,\n  },\n  textField: {\n    flex: 1,\n  },\n};\n\nconst GoogleDriveFileOrFolderPicker = (props: Props) => {\n  return (\n    <div\n      style={{\n        ...styles.container,\n      }}\n    >\n      <TextField\n        style={styles.textField}\n        floatingLabelText={props.floatingLabelText}\n        floatingLabelFixed\n        type=\"text\"\n        translatableHintText={t`Choose a file or folder`}\n        value={props.value ? props.value.name : ''}\n        onChange={() => {}}\n      />\n      <RaisedButton\n        label={<Trans>Choose...</Trans>}\n        primary\n        style={styles.button}\n        onClick={props.onOpenPicker}\n      />\n    </div>\n  );\n};\n\nexport default GoogleDriveFileOrFolderPicker;\n","// @flow\nimport { t } from '@lingui/macro';\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog, { DialogPrimaryButton } from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport { Column, Line } from '../../UI/Grid';\nimport GoogleDriveFileOrFolderPicker from './GoogleDriveFileOrFolderPicker';\nimport {\n  type GoogleDriveFileOrFolder,\n  type GoogleDriveFilePickerOptions,\n} from '.';\nimport TextField from '../../UI/TextField';\nimport LeftLoader from '../../UI/LeftLoader';\nimport AlertMessage from '../../UI/AlertMessage';\n\ntype Props = {|\n  onCancel: () => void,\n  onSave: ({|\n    selectedFileOrFolder: GoogleDriveFileOrFolder,\n    newFileName: string,\n  |}) => Promise<void>,\n  onShowFilePicker: GoogleDriveFilePickerOptions => Promise<?GoogleDriveFileOrFolder>,\n|};\n\n/**\n * A \"Save as\" dialog for Google Drive, allowing to pick a file to overwrite or a folder\n * and a new filename where to save the game.\n */\nconst GoogleDriveSaveAsDialog = (props: Props) => {\n  const [selectedFileOrFolder, setSelectedFileOrFolder] = React.useState(\n    (null: ?GoogleDriveFileOrFolder)\n  );\n  const [newFileName, setNewFileName] = React.useState('');\n  const [saving, setSaving] = React.useState(false);\n  const [saveError, setSaveError] = React.useState((null: ?Error));\n  const [pickerError, setPickerError] = React.useState((null: ?Error));\n  const [dialogHidden, hideDialog] = React.useState(false);\n\n  const canSave = () => {\n    if (saving) return;\n    if (!selectedFileOrFolder) return;\n\n    return selectedFileOrFolder.type === 'FOLDER' ? !!newFileName : true;\n  };\n  const save = () => {\n    if (!canSave() || !selectedFileOrFolder) return;\n\n    setSaveError(null);\n    setSaving(true);\n    props\n      .onSave({\n        selectedFileOrFolder,\n        newFileName,\n      })\n      .catch(error => {\n        setSaveError(error);\n        setSaving(false);\n      });\n  };\n  const canCancel = () => !saving;\n  const cancel = () => {\n    if (!canCancel()) return;\n\n    props.onCancel();\n  };\n  const openPicker = () => {\n    hideDialog(true);\n    setPickerError(null);\n    props\n      .onShowFilePicker({ selectFolderEnabled: true, showUploadView: false })\n      .then(selectedFileOrFolder => {\n        setSelectedFileOrFolder(selectedFileOrFolder);\n        hideDialog(false);\n      })\n      .catch(error => {\n        setPickerError(error);\n        hideDialog(false);\n      });\n  };\n\n  // Hide the dialog while the picker is opened, as it does not play nice with material-ui's\n  // Dialog.\n  if (dialogHidden) {\n    return null;\n  }\n\n  return (\n    <Dialog\n      title={<Trans>Save on Google Drive</Trans>}\n      actions={[\n        <FlatButton\n          key=\"cancel\"\n          label={<Trans>Cancel</Trans>}\n          primary={false}\n          disabled={!canCancel()}\n          onClick={props.onCancel}\n        />,\n        <LeftLoader key=\"save\" isLoading={saving}>\n          <DialogPrimaryButton\n            label={<Trans>Save</Trans>}\n            primary\n            disabled={!canSave()}\n            onClick={save}\n          />\n        </LeftLoader>,\n      ]}\n      cannotBeDismissed={saving}\n      onRequestClose={cancel}\n      onApply={save}\n      open\n      maxWidth=\"sm\"\n    >\n      <Column noMargin>\n        <Line>\n          <GoogleDriveFileOrFolderPicker\n            floatingLabelText={\n              <Trans>Google Drive folder or existing file to overwrite</Trans>\n            }\n            value={selectedFileOrFolder}\n            onOpenPicker={openPicker}\n          />\n        </Line>\n        <Line>\n          {selectedFileOrFolder && selectedFileOrFolder.type === 'FOLDER' ? (\n            <TextField\n              floatingLabelText={<Trans>New file name</Trans>}\n              floatingLabelFixed\n              type=\"text\"\n              translatableHintText={t`YourGame.json`}\n              value={newFileName}\n              onChange={(event, newFileName) => setNewFileName(newFileName)}\n              fullWidth\n            />\n          ) : null}\n        </Line>\n        {saveError && (\n          <Line>\n            <AlertMessage kind=\"error\">\n              There was an error when saving your game. Verify that you have the\n              rights on the folder or file that you selected and try again.\n            </AlertMessage>\n          </Line>\n        )}\n        {pickerError && (\n          <Line>\n            <AlertMessage kind=\"error\">\n              There was an error when selecting a file or folder from Google\n              Drive. Try again later or verify that you are properly connected\n              to Google Drive.\n            </AlertMessage>\n          </Line>\n        )}\n      </Column>\n    </Dialog>\n  );\n};\n\nexport default GoogleDriveSaveAsDialog;\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport {\n  type StorageProvider,\n  type FileMetadata,\n  type SaveAsLocation,\n} from '../index';\nimport { serializeToJSON } from '../../Utils/Serializer';\nimport GoogleDrive from '../../UI/CustomSvgIcons/GoogleDrive';\nimport GoogleDriveSaveAsDialog from './GoogleDriveSaveAsDialog';\nimport { type MessageDescriptor } from '../../Utils/i18n/MessageDescriptor.flow';\nimport { type AppArguments } from '../../Utils/Window';\nimport { loadScript } from '../../Utils/LoadScript';\nconst isDev = process.env.NODE_ENV === 'development';\n\nconst DEVELOPER_KEY = isDev\n  ? 'AIzaSyDH3UNpxzIpcTyd6aMCWI5oNFSptG_BhOc'\n  : 'AIzaSyDJYQmzLCfjXnNImDa1X_cDTWjl2BOrcM4';\nconst CLIENT_ID = isDev\n  ? '28563107180-bd29h9f3og4h1632m94nv6hat2igrej6.apps.googleusercontent.com'\n  : '44882707384-3t4tubr3fbht87sbtdp7u5mlo45k5uku.apps.googleusercontent.com';\nconst APP_ID = isDev ? '28563107180' : '44882707384'; // This is the first part of CLIENT_ID.\nconst DISCOVERY_DOCS = [\n  'https://www.googleapis.com/discovery/v1/apis/drive/v3/rest',\n];\nconst SCOPE =\n  'https://www.googleapis.com/auth/drive.file https://www.googleapis.com/auth/drive.install';\n\nlet apisLoaded = false;\nlet apisLoadingPromise = null;\n\n/**\n * Load Google Drive APIs. Return a fulfilled promise when done.\n */\nconst initializeApis = (): Promise<void> => {\n  if (apisLoaded) {\n    return Promise.resolve();\n  }\n\n  if (apisLoadingPromise) {\n    // Only do a single initialization attempt at a given time.\n    return apisLoadingPromise;\n  }\n\n  apisLoadingPromise = loadScript('https://apis.google.com/js/api:client.js')\n    .then(() => {\n      const gapi = global.gapi;\n      if (!gapi) {\n        throw new Error(\n          'No gapi global object found after loading Google Drive API script'\n        );\n      }\n\n      return new Promise((resolve, reject) => {\n        gapi.load('client:auth2:picker', {\n          callback: () => {\n            const auth2LoadPromise = gapi.auth2.init({\n              apiKey: DEVELOPER_KEY,\n              clientId: CLIENT_ID,\n              discoveryDocs: DISCOVERY_DOCS,\n              scope: SCOPE,\n            });\n\n            gapi.client.setApiKey(DEVELOPER_KEY);\n            const driveLoadPromise = gapi.client.load('drive', 'v3');\n\n            resolve(Promise.all([auth2LoadPromise, driveLoadPromise]));\n          },\n          onerror: () => {\n            reject(\n              new Error(\n                'Unable to load auth2 and picker APIs for Google Drive.'\n              )\n            );\n          },\n        });\n      });\n    })\n    .then(() => {\n      apisLoaded = true;\n      apisLoadingPromise = null;\n    })\n    .catch(error => {\n      console.error('Error while loading Google Drive APIs:', error);\n      apisLoadingPromise = null;\n\n      throw error;\n    });\n\n  return apisLoadingPromise;\n};\n\ntype GoogleUser = {\n  getAuthResponse: () => { access_token: string, error?: ?Error },\n};\n\nlet isAuthenticated = false;\n\n/**\n * Sign in the user to Google Drive, returning the user object after a successful sign up\n * (or if the user is already signed in).\n */\nexport const authenticate = (): Promise<GoogleUser> => {\n  return initializeApis().then(() => {\n    const gapi = global.gapi;\n    const googleAuth = gapi.auth2.getAuthInstance();\n    if (isAuthenticated && googleAuth.isSignedIn.get()) {\n      return googleAuth.currentUser.get();\n    }\n\n    isAuthenticated = false;\n    googleAuth.isSignedIn.listen(authenticated => {\n      console.info('Authenticated with Google APIs: ', authenticated);\n      isAuthenticated = authenticated;\n    });\n    return googleAuth\n      .signIn({ scope: SCOPE })\n      .then((googleUser: GoogleUser) => {\n        if (\n          !googleUser.getAuthResponse() ||\n          googleUser.getAuthResponse().error\n        ) {\n          console.error(\n            'OAuth2 error while sign in:',\n            googleUser.getAuthResponse()\n              ? googleUser.getAuthResponse().error\n              : 'No AuthResponse'\n          );\n          throw new Error('Authentication error');\n        }\n\n        isAuthenticated = true;\n        return googleUser;\n      });\n  });\n};\n\n/**\n * Update a JSON file, given its file id.\n */\nexport const patchJsonFile = (\n  fileId: string,\n  googleUser: GoogleUser,\n  content: string\n): Promise<void> => {\n  return fetch(`https://www.googleapis.com/upload/drive/v3/files/${fileId}`, {\n    method: 'PATCH',\n    headers: new Headers({\n      Authorization: `Bearer ${googleUser.getAuthResponse().access_token}`,\n      'Content-Type': 'application/json',\n    }),\n    body: content,\n  }).then(res => {\n    if (res.status !== 200) {\n      if (res.status === 401) {\n        isAuthenticated = false;\n      }\n\n      throw res;\n    }\n  });\n};\n\n/**\n * Create a new empty JSON file, returning its fileid.\n */\nexport const createNewJsonFile = (\n  parentId: string,\n  name: string\n): Promise<string> => {\n  const gapi = global.gapi;\n\n  return gapi.client.drive.files\n    .create({\n      'content-type': 'application/json',\n      uploadType: 'multipart',\n      name: name,\n      parents: [parentId],\n      mimeType: 'application/json',\n      fields: 'id, name, kind, size',\n    })\n    .then(apiResponse => {\n      return apiResponse.result.id;\n    });\n};\n\n/**\n * Information about a file or folder picked by the user.\n */\nexport type GoogleDriveFileOrFolder =\n  | {|\n      type: 'FOLDER',\n      id: string,\n      name: string,\n    |}\n  | {|\n      type: 'FILE',\n      id: string,\n      name: string,\n      parentId: string,\n    |};\n\nexport type GoogleDriveFilePickerOptions = {|\n  selectFolderEnabled: boolean,\n  showUploadView: boolean,\n|};\n\n/**\n * Display a file picker as a modal, resolving with the selected file or folder,\n * if any.\n *\n * The picker dialog is not playing nice with material-ui dialogs or overlays. They should\n * not be displayed when the picker is on screen.\n */\nconst showFilePicker = ({\n  selectFolderEnabled,\n  showUploadView,\n}: GoogleDriveFilePickerOptions): Promise<?GoogleDriveFileOrFolder> => {\n  return authenticate().then(googleUser => {\n    const google = global.google;\n\n    return new Promise(resolve => {\n      let picker = null;\n      const pickerBuilder = new google.picker.PickerBuilder()\n        .addView(\n          new google.picker.DocsView()\n            .setIncludeFolders(true)\n            .setSelectFolderEnabled(selectFolderEnabled)\n        )\n        .setOAuthToken(googleUser.getAuthResponse().access_token)\n        .setDeveloperKey(DEVELOPER_KEY)\n        .setAppId(APP_ID) // App ID is required to correctly identify files created with the app.\n        .setCallback(data => {\n          if (\n            data[google.picker.Response.ACTION] === google.picker.Action.PICKED\n          ) {\n            const doc = data[google.picker.Response.DOCUMENTS][0];\n            const id: string = doc[google.picker.Document.ID];\n            const name: string = doc[google.picker.Document.NAME];\n            const parentId: string = doc[google.picker.Document.PARENT_ID];\n            if (\n              doc[google.picker.Document.TYPE] ===\n                google.picker.Type.LOCATION ||\n              doc[google.picker.Document.MIME_TYPE] ===\n                'application/vnd.google-apps.folder'\n            ) {\n              resolve({ id, name, type: 'FOLDER' });\n            } else {\n              resolve({ id, name, type: 'FILE', parentId });\n            }\n            if (picker) picker.dispose();\n          } else if (\n            data[google.picker.Response.ACTION] === google.picker.Action.CANCEL\n          ) {\n            resolve(null);\n            if (picker) picker.dispose();\n          }\n        });\n      if (showUploadView) {\n        pickerBuilder.addView(\n          new google.picker.DocsUploadView().setIncludeFolders(true)\n        );\n      }\n\n      picker = pickerBuilder.build();\n\n      picker.setVisible(true);\n      const pickerElements = document.getElementsByClassName('picker-dialog');\n      for (var i = 0; i < pickerElements.length; ++i) {\n        pickerElements[i].style.zIndex = '5000'; // Higher than Material UI modals\n      }\n    });\n  });\n};\n\n/**\n * A storage that is using Google Drive to open and store files.\n */\nexport default ({\n  internalName: 'GoogleDrive',\n  name: t`Google Drive`,\n  renderIcon: props => <GoogleDrive fontSize={props.size} />,\n  getFileMetadataFromAppArguments: (appArguments: AppArguments) => {\n    if (appArguments.state) {\n      try {\n        // See \"state\" argument passed by Google Drive API:\n        // https://developers.google.com/drive/api/v3/enable-sdk#construct\n        const googleDriveState = JSON.parse(appArguments.state);\n        if (googleDriveState.ids && googleDriveState.ids[0]) {\n          return {\n            fileIdentifier: googleDriveState.ids[0],\n          };\n        }\n      } catch (e) {\n        console.warn(\n          \"Error while trying to parse the Google Drive 'ids' in 'state' from the app arguments.\"\n        );\n      }\n    }\n\n    return null;\n  },\n  createOperations: ({ setDialog, closeDialog }) => {\n    initializeApis().catch(() => {\n      // Ignore error as we'll retry later.\n    });\n\n    return {\n      doesInitialOpenRequireUserInteraction: true, // Authentication will open a popup, requiring user interaction\n      onOpen: (\n        fileMetadata: FileMetadata\n      ): Promise<{|\n        content: Object,\n      |}> => {\n        const fileId = fileMetadata.fileIdentifier;\n\n        return authenticate()\n          .then(googleUser =>\n            fetch(\n              `https://www.googleapis.com/drive/v3/files/${fileId}?alt=media`,\n              {\n                method: 'GET',\n                headers: new Headers({\n                  Authorization: `Bearer ${\n                    googleUser.getAuthResponse().access_token\n                  }`,\n                }),\n              }\n            )\n          )\n          .then(\n            response => {\n              return response.text().then(\n                fileContent => {\n                  return new Promise((resolve, reject) => {\n                    try {\n                      const dataObject = JSON.parse(fileContent);\n                      return resolve({\n                        content: dataObject,\n                      });\n                    } catch (ex) {\n                      return reject(fileId + ' is a corrupted/malformed file.');\n                    }\n                  });\n                },\n                error => {\n                  console.error(\n                    'Error while reading the file from Google Drive API: ',\n                    error\n                  );\n                  throw error;\n                }\n              );\n            },\n            error => {\n              console.error(\n                'Error while fetching the file from Google Drive API: ',\n                error\n              );\n              throw error;\n            }\n          );\n      },\n      onOpenWithPicker: (): Promise<?FileMetadata> => {\n        return authenticate()\n          .then(googleUser =>\n            showFilePicker({ selectFolderEnabled: false, showUploadView: true })\n          )\n          .then(googleDriveFileOrFolder => {\n            if (!googleDriveFileOrFolder) {\n              return null;\n            }\n\n            return {\n              fileIdentifier: googleDriveFileOrFolder.id,\n            };\n          });\n      },\n      onSaveProject: (project: gdProject, fileMetadata: FileMetadata) => {\n        const fileId = fileMetadata.fileIdentifier;\n        const newFileMetadata = {\n          ...fileMetadata,\n          lastModifiedDate: Date.now(),\n        };\n\n        const content = serializeToJSON(project);\n        return authenticate()\n          .then(googleUser => patchJsonFile(fileId, googleUser, content))\n          .then(() => ({\n            wasSaved: true,\n            fileMetadata: newFileMetadata,\n          }));\n      },\n      onChooseSaveProjectAsLocation: ({\n        project,\n        fileMetadata,\n      }: {|\n        project: gdProject,\n        fileMetadata: ?FileMetadata,\n      |}) => {\n        return new Promise(resolve => {\n          setDialog(() => (\n            <GoogleDriveSaveAsDialog\n              onShowFilePicker={showFilePicker}\n              onCancel={() => {\n                closeDialog();\n                resolve({ saveAsLocation: null });\n              }}\n              onSave={async ({ selectedFileOrFolder, newFileName }) => {\n                await authenticate();\n                if (selectedFileOrFolder.type === 'FOLDER') {\n                  const newFileId = await createNewJsonFile(\n                    selectedFileOrFolder.id,\n                    newFileName\n                  );\n                  resolve({\n                    saveAsLocation: {\n                      fileIdentifier: newFileId,\n                    },\n                  });\n                } else {\n                  resolve({\n                    saveAsLocation: {\n                      fileIdentifier: selectedFileOrFolder.id,\n                    },\n                  });\n                }\n              }}\n            />\n          ));\n        });\n      },\n      onSaveProjectAs: async (\n        project: gdProject,\n        saveAsLocation: ?SaveAsLocation,\n        options\n      ) => {\n        if (!saveAsLocation)\n          throw new Error('A location was not chosen before saving as.');\n        const { fileIdentifier } = saveAsLocation;\n        if (!fileIdentifier)\n          throw new Error('A file was not chosen before saving as.');\n\n        const content = serializeToJSON(project);\n        options.onStartSaving();\n\n        const googleUser = await authenticate();\n        const newFileMetadata = { fileIdentifier };\n        await options.onMoveResources({ newFileMetadata });\n        await patchJsonFile(fileIdentifier, googleUser, content);\n\n        closeDialog();\n        return {\n          wasSaved: true,\n          fileMetadata: newFileMetadata,\n        };\n      },\n      getOpenErrorMessage: (error: Error): MessageDescriptor => {\n        if (!apisLoaded) {\n          return t`Google Drive could not be loaded. Check that you are not offline and have a proper internet connection, then try again.`;\n        }\n\n        return t`Check that you don't have any blocked popup (if so, allow them and retry) and that you have the authorization for reading the file you're trying to access.`;\n      },\n    };\n  },\n}: StorageProvider);\n","// @flow\nimport { Trans } from '@lingui/macro';\nimport * as React from 'react';\nimport Dialog from '../../UI/Dialog';\nimport FlatButton from '../../UI/FlatButton';\nimport RaisedButton from '../../UI/RaisedButton';\nimport { Line } from '../../UI/Grid';\nimport { ColumnStackLayout } from '../../UI/Layout';\nimport Window from '../../Utils/Window';\nimport {\n  BlobDownloadUrlHolder,\n  openBlobDownloadUrl,\n} from '../../Utils/BlobDownloadUrlHolder';\nimport PlaceholderLoader from '../../UI/PlaceholderLoader';\nimport { serializeToJSObject } from '../../Utils/Serializer';\nimport { showErrorBox } from '../../UI/Messages/MessageBox';\nimport Text from '../../UI/Text';\nimport {\n  downloadUrlsToBlobs,\n  type ItemResult,\n} from '../../Utils/BlobDownloader';\nimport { useGenericRetryableProcessWithProgress } from '../../Utils/UseGenericRetryableProcessWithProgress';\nimport { checkIfIsGDevelopCloudBucketUrl } from '../../Utils/CrossOrigin';\nimport { extractDecodedFilenameFromProjectResourceUrl } from '../../Utils/GDevelopServices/Project';\nimport {\n  archiveFiles,\n  type BlobFileDescriptor,\n  type TextFileDescriptor,\n} from '../../Utils/BrowserArchiver';\nimport path from 'path-browserify';\nimport newNameGenerator from '../../Utils/NewNameGenerator';\nconst gd: libGDevelop = global.gd;\n\nconst PROJECT_JSON_FILENAME = 'game.json';\n\n// For some reason, `path.posix` is undefined when packaged\n// with webpack, so we're using `path` directly. As it's for the web-app,\n// it should always be the posix version. In tests on Windows,\n// it's necessary to use path.posix.\n// Search for \"pathPosix\" in the codebase for other places where this is used.\nconst pathPosix = path.posix || path;\n\nconst isURL = (filename: string) => {\n  return (\n    filename.startsWith('http://') ||\n    filename.startsWith('https://') ||\n    filename.startsWith('ftp://') ||\n    filename.startsWith('blob:') ||\n    filename.startsWith('data:')\n  );\n};\n\ntype DownloadResourcesAsBlobsOptionsWithoutProgress = {\n  project: gdProject,\n  onAddBlobFile: (blobFileDescriptor: BlobFileDescriptor) => void,\n};\n\ntype DownloadResourcesAsBlobsOptions = {\n  ...DownloadResourcesAsBlobsOptionsWithoutProgress,\n  onProgress: (count: number, total: number) => void,\n};\n\nexport const downloadResourcesAsBlobs = async ({\n  project,\n  onAddBlobFile,\n  onProgress,\n}: DownloadResourcesAsBlobsOptions) => {\n  const result = {\n    erroredResources: [],\n  };\n\n  type ResourceToFetch = {|\n    resource: gdResource,\n    url: string,\n    filename: string,\n  |};\n\n  const getResourcesToFetch = (project: gdProject): Array<ResourceToFetch> => {\n    const resourcesManager = project.getResourcesManager();\n    const allResourceNames = resourcesManager.getAllResourceNames().toJSArray();\n    return allResourceNames\n      .map(\n        (resourceName: string): ?ResourceToFetch => {\n          const resource = resourcesManager.getResource(resourceName);\n          const resourceFile = resource.getFile();\n\n          if (isURL(resourceFile)) {\n            if (checkIfIsGDevelopCloudBucketUrl(resourceFile)) {\n              return {\n                resource,\n                url: resourceFile,\n                filename: extractDecodedFilenameFromProjectResourceUrl(\n                  resourceFile\n                ),\n              };\n            } else {\n              // Public URL resource: nothing to do.\n              return null;\n            }\n          } else {\n            // Local resource: unsupported.\n            result.erroredResources.push({\n              resourceName: resource.getName(),\n              error: new Error(\n                'Unsupported relative file when downloading a copy.'\n              ),\n            });\n            return null;\n          }\n        }\n      )\n      .filter(Boolean);\n  };\n\n  const resourcesToFetchAndUpload = getResourcesToFetch(project);\n\n  // Download all the project resources as blob (much like what is done during an export).\n  const downloadedBlobsAndResources: Array<\n    ItemResult<ResourceToFetch>\n  > = await downloadUrlsToBlobs({\n    urlContainers: resourcesToFetchAndUpload,\n    onProgress: (count, total) => {\n      onProgress(count, total * 2);\n    },\n  });\n\n  const alreadyUsedFilenames = new Set([PROJECT_JSON_FILENAME]);\n\n  downloadedBlobsAndResources.forEach(({ item, error, blob }) => {\n    const { resource, filename } = item;\n    if (error || !blob) {\n      result.erroredResources.push({\n        resourceName: resource.getName(),\n        error: error || new Error('Unknown error during download.'),\n      });\n      return;\n    }\n\n    // Ensure each filename is unique, and sort resources in folder by types.\n    const extension = pathPosix.extname(filename);\n    const basename = pathPosix.basename(filename, extension);\n    const pathPrefix = 'assets/' + resource.getKind();\n    const newBasename = newNameGenerator(basename, tentativeBasename =>\n      alreadyUsedFilenames.has(\n        pathPosix.join(pathPrefix, tentativeBasename + extension)\n      )\n    );\n    const newResourcePath = pathPosix.join(pathPrefix, newBasename + extension);\n    alreadyUsedFilenames.add(newResourcePath);\n\n    resource.setFile(newResourcePath);\n    onAddBlobFile({ blob, filePath: newResourcePath });\n  });\n\n  return result;\n};\n\ntype Props = {|\n  project: gdProject,\n  onDone: () => void,\n|};\n\nexport default function DownloadFileSaveAsDialog({ project, onDone }: Props) {\n  const [zippedProjectBlob, setZippedProjectBlob] = React.useState<?Blob>(null);\n  const {\n    ensureProcessIsDone,\n    renderProcessDialog,\n  } = useGenericRetryableProcessWithProgress<DownloadResourcesAsBlobsOptionsWithoutProgress>(\n    {\n      onDoProcess: React.useCallback(\n        (options, onProgress) =>\n          downloadResourcesAsBlobs({ ...options, onProgress }),\n        []\n      ),\n    }\n  );\n  React.useEffect(\n    () => {\n      (async () => {\n        setZippedProjectBlob(null);\n        const newProject = gd.ProjectHelper.createNewGDJSProject();\n        try {\n          // Make a copy of the project, as it will be updated.\n          const serializedProject = new gd.SerializerElement();\n          project.serializeTo(serializedProject);\n          newProject.unserializeFrom(serializedProject);\n          serializedProject.delete();\n\n          // Download resources to blobs, and update the project resources.\n          const blobFiles: Array<BlobFileDescriptor> = [];\n          const textFiles: Array<TextFileDescriptor> = [];\n          await ensureProcessIsDone({\n            project: newProject,\n            onAddBlobFile: (blobFileDescriptor: BlobFileDescriptor) => {\n              blobFiles.push(blobFileDescriptor);\n            },\n          });\n\n          // Serialize the project.\n          textFiles.push({\n            text: JSON.stringify(serializeToJSObject(newProject)),\n            filePath: PROJECT_JSON_FILENAME,\n          });\n\n          // Archive the whole project.\n          const zippedProjectBlob = await archiveFiles({\n            textFiles,\n            blobFiles,\n            basePath: '/',\n            onProgress: (count: number, total: number) => {},\n          });\n          setZippedProjectBlob(zippedProjectBlob);\n        } catch (rawError) {\n          showErrorBox({\n            message:\n              'Unable to save your project because of an internal error.',\n            rawError,\n            errorId: 'download-file-save-as-dialog-error',\n          });\n          return;\n        } finally {\n          newProject.delete();\n        }\n      })();\n      return () => setZippedProjectBlob(null);\n    },\n    [project, ensureProcessIsDone]\n  );\n\n  return (\n    <Dialog\n      title={<Trans>Download a copy</Trans>}\n      actions={[\n        <FlatButton\n          key=\"download\"\n          label={<Trans>Download GDevelop desktop version</Trans>}\n          primary={false}\n          onClick={() => Window.openExternalURL('http://gdevelop.io')}\n        />,\n        <FlatButton\n          key=\"close\"\n          label={<Trans>Close</Trans>}\n          primary={false}\n          onClick={onDone}\n        />,\n      ]}\n      onRequestClose={onDone}\n      open\n      maxWidth=\"sm\"\n    >\n      <ColumnStackLayout noMargin>\n        <Text>\n          <Trans>\n            You can download the file of your game to continue working on it\n            using the full GDevelop version:\n          </Trans>\n        </Text>\n        <Line noMargin expand justifyContent=\"center\">\n          {zippedProjectBlob ? (\n            <BlobDownloadUrlHolder blob={zippedProjectBlob}>\n              {blobDownloadUrl => (\n                <RaisedButton\n                  primary\n                  onClick={() =>\n                    openBlobDownloadUrl(blobDownloadUrl, 'gdevelop-game.zip')\n                  }\n                  label={\n                    <Trans>Download the compressed game and resources</Trans>\n                  }\n                />\n              )}\n            </BlobDownloadUrlHolder>\n          ) : (\n            <PlaceholderLoader />\n          )}\n        </Line>\n      </ColumnStackLayout>\n      {renderProcessDialog()}\n    </Dialog>\n  );\n}\n","// @flow\nimport { t } from '@lingui/macro';\nimport * as React from 'react';\nimport Download from '../../UI/CustomSvgIcons/Download';\nimport { type StorageProvider, type SaveAsLocation } from '../index';\nimport DownloadFileSaveAsDialog from './DownloadFileSaveAsDialog';\n\n/**\n * \"Storage\" allowing to download a copy of the game.\n * Used for the web-app.\n */\nexport default ({\n  internalName: 'DownloadFile',\n  name: t`Download a copy`,\n  renderIcon: props => <Download fontSize={props.size} />,\n  hiddenInOpenDialog: true,\n  createOperations: ({ setDialog, closeDialog }) => ({\n    onSaveProjectAs: async (\n      project: gdProject,\n      saveAsLocation: ?SaveAsLocation, // Unused - everything is done in memory.\n      options\n    ) => {\n      options.onStartSaving();\n\n      return new Promise(resolve => {\n        setDialog(() => (\n          <DownloadFileSaveAsDialog\n            onDone={() => {\n              closeDialog();\n              resolve({ wasSaved: false, fileMetadata: null });\n            }}\n            project={project}\n          />\n        ));\n      });\n    },\n  }),\n}: StorageProvider);\n","// @flow\nimport {\n  type ResourceMover,\n  type MoveAllProjectResourcesOptions,\n  type MoveAllProjectResourcesResult,\n  type MoveAllProjectResourcesFunction,\n} from './index';\nimport CloudStorageProvider from '../CloudStorageProvider';\nimport GoogleDriveStorageProvider from '../GoogleDriveStorageProvider';\nimport UrlStorageProvider from '../UrlStorageProvider';\nimport DownloadFileStorageProvider from '../DownloadFileStorageProvider';\nimport {\n  ensureNoCloudProjectResources,\n  moveUrlResourcesToCloudProject,\n} from '../CloudStorageProvider/CloudResourceMover';\n\nconst moveNothing = async () => {\n  return {\n    erroredResources: [],\n  };\n};\n\nconst movers: {\n  [string]: MoveAllProjectResourcesFunction,\n} = {\n  // Moving to GDevelop \"Cloud\" storage:\n\n  // From a Cloud project to another, resources need to be copied\n  // (unless they are public URLs).\n  [`${CloudStorageProvider.internalName}=>${\n    CloudStorageProvider.internalName\n  }`]: moveUrlResourcesToCloudProject,\n  // On the web-app, most resources are public URLs, so nothing to do.\n  // But if some resources are coming from a private game template,\n  // they need to be copied.\n  [`${UrlStorageProvider.internalName}=>${\n    CloudStorageProvider.internalName\n  }`]: moveUrlResourcesToCloudProject,\n  // Nothing to move around when going from a project on Google Drive\n  // to a cloud project (because only public URLs are supported on Google Drive).\n  [`${GoogleDriveStorageProvider.internalName}=>${\n    CloudStorageProvider.internalName\n  }`]: moveNothing,\n\n  // Moving to \"GoogleDrive\" storage:\n\n  // Google Drive does not support GDevelop cloud resources, so ensure there are none.\n  [`${CloudStorageProvider.internalName}=>${\n    GoogleDriveStorageProvider.internalName\n  }`]: ensureNoCloudProjectResources,\n  // Nothing to move around when saving to a Google Drive project from a public URL\n  // (because only public URLs are supported).\n  [`${UrlStorageProvider.internalName}=>${\n    GoogleDriveStorageProvider.internalName\n  }`]: moveNothing,\n  // Nothing to move around when saving from a Google Drive project to another\n  // (because only public URLs are supported).\n  [`${GoogleDriveStorageProvider.internalName}=>${\n    GoogleDriveStorageProvider.internalName\n  }`]: moveNothing,\n\n  // Moving to \"DownloadFile\":\n\n  // Saving to \"DownloadFile\" will *not* change any resources, as it's a\n  // \"temporary save\" that is made and given to the user.\n  [`${CloudStorageProvider.internalName}=>${\n    DownloadFileStorageProvider.internalName\n  }`]: moveNothing,\n  [`${UrlStorageProvider.internalName}=>${\n    DownloadFileStorageProvider.internalName\n  }`]: moveNothing,\n  [`${GoogleDriveStorageProvider.internalName}=>${\n    DownloadFileStorageProvider.internalName\n  }`]: moveNothing,\n};\n\nconst BrowserResourceMover: ResourceMover = {\n  moveAllProjectResources: async (\n    options: MoveAllProjectResourcesOptions\n  ): Promise<MoveAllProjectResourcesResult> => {\n    const { oldStorageProvider, newStorageProvider } = options;\n    const mover =\n      movers[\n        `${oldStorageProvider.internalName}=>${newStorageProvider.internalName}`\n      ];\n    if (!mover)\n      throw new Error(\n        `Can't find a ResourceMover for ${oldStorageProvider.internalName} to ${\n          newStorageProvider.internalName\n        }.`\n      );\n\n    return mover(options);\n  },\n};\n\nexport default BrowserResourceMover;\n","// @flow\nimport {\n  type ResourceFetcher,\n  type FetchAllProjectResourcesOptions,\n  type FetchAllProjectResourcesResult,\n  type FetchAllProjectResourcesFunction,\n} from './index';\nimport CloudStorageProvider from '../CloudStorageProvider';\nimport { moveUrlResourcesToCloudFilesIfPrivate } from '../CloudStorageProvider/CloudResourceFetcher';\nimport GoogleDriveStorageProvider from '../GoogleDriveStorageProvider';\nimport UrlStorageProvider from '../UrlStorageProvider';\nimport { fetchRelativeResourcesToFullUrls } from '../UrlStorageProvider/UrlResourceFetcher';\n\nconst fetchNothing: FetchAllProjectResourcesFunction = async () => {\n  return {\n    erroredResources: [],\n  };\n};\n\nconst fetchers: {\n  [string]: FetchAllProjectResourcesFunction,\n} = {\n  // The Cloud file storage provider fetches the resources that are\n  // private URLs by downloading them and reuploading them to the cloud.\n  [CloudStorageProvider.internalName]: moveUrlResourcesToCloudFilesIfPrivate,\n  // The cloud storage has nothing to fetch, all resources are supposed\n  // to be public URLs.\n  [GoogleDriveStorageProvider.internalName]: fetchNothing,\n  // The URL storage consider relative resources to be relative to the project\n  // URL. This allows to open local projects uploaded to GitHub for example.\n  [UrlStorageProvider.internalName]: fetchRelativeResourcesToFullUrls,\n};\n\nconst BrowserResourceFetcher: ResourceFetcher = {\n  fetchAllProjectResources: async (\n    options: FetchAllProjectResourcesOptions\n  ): Promise<FetchAllProjectResourcesResult> => {\n    const { storageProvider } = options;\n    const fetcher = fetchers[storageProvider.internalName];\n    if (!fetcher)\n      throw new Error(\n        `Can't find a ResourceFetcher for ${\n          storageProvider.internalName\n        } - have you registered the storage provider here?`\n      );\n\n    return fetcher(options);\n  },\n};\n\nexport default BrowserResourceFetcher;\n","// @flow\n\nexport default class BrowserEventsFunctionsExtensionOpener {\n  static chooseEventsFunctionExtensionFile = (): Promise<?any> => {\n    return new Promise(resolve => {\n      if (window.showOpenFilePicker) {\n        window\n          .showOpenFilePicker({\n            types: [\n              {\n                description: 'GDevelop Extension',\n                accept: {\n                  'application/json': ['.json'],\n                },\n              },\n            ],\n            excludeAcceptAllOption: true,\n            multiple: false,\n          })\n          .then(([handle]) => {\n            if (!handle) return resolve(null);\n            resolve(handle.getFile());\n          })\n          .catch(() => {\n            resolve(null);\n          });\n      } else {\n        const adhocInput = document.createElement('input');\n        adhocInput.type = 'file';\n        adhocInput.multiple = false;\n        adhocInput.accept = 'application/json,.json';\n        adhocInput.onchange = e => {\n          const file = e.target.files[0];\n          return resolve(file);\n        };\n\n        // There is no built-in way to know if the user closed the file picking dialog\n        // with the cancel button. What follows is an implementation that follows\n        // https://stackoverflow.com/questions/71435515/how-can-i-detect-that-the-cancel-button-has-been-clicked-on-a-input-type-file.\n        // TODO: Find a better way to detect this since it looks like the `change` event\n        // does not have enough time to propagate when the user selects a file from the dialog\n        // by double-clicking it.\n\n        const onFocusBackWindow = () => {\n          window.removeEventListener('focus', onFocusBackWindow);\n          if (document.body) {\n            document.body.addEventListener(\n              'pointermove',\n              onFilePickingDialogFinishedClosing\n            );\n          }\n        };\n\n        const onFilePickingDialogFinishedClosing = () => {\n          if (document.body) {\n            document.body.removeEventListener(\n              'pointermove',\n              onFilePickingDialogFinishedClosing\n            );\n          }\n          if (!adhocInput.files.length) {\n            resolve(null);\n          }\n        };\n\n        window.addEventListener('focus', onFocusBackWindow);\n        adhocInput.click();\n      }\n    });\n  };\n\n  static readEventsFunctionExtensionFile = async (\n    file: any\n  ): Promise<Object> => {\n    if (!(file instanceof File)) {\n      console.error('Given file is not a JS File object. Instead it is:', {\n        file,\n      });\n      throw new Error('Given file is not a JS File object.');\n    }\n\n    try {\n      const content = await file.text();\n      return JSON.parse(content);\n    } catch (error) {\n      console.error('An error occurred when parsing the file content: ', {\n        error,\n      });\n      throw error;\n    }\n  };\n}\n","// @flow\nimport { serializeToJSObject } from '../../Utils/Serializer';\n\nconst downloadStringContentAsFile = async (\n  filename: string,\n  content: string\n): Promise<void> => {\n  const blob = new Blob([content], { type: 'application/json' });\n  const blobUrl = URL.createObjectURL(blob);\n\n  const adhocLink = document.createElement('a');\n  adhocLink.href = blobUrl;\n  adhocLink.download = filename;\n  if (document.body) {\n    document.body.appendChild(adhocLink);\n    adhocLink.click();\n    adhocLink.remove();\n  } else {\n    throw new Error(\"Document body couldn't be found.\");\n  }\n  return;\n};\n\nexport default class BrowserEventsFunctionsExtensionWriter {\n  static chooseEventsFunctionExtensionFile = async (\n    extensionName?: string\n  ): Promise<?string> => {\n    return extensionName;\n  };\n\n  static writeEventsFunctionsExtension = async (\n    extension: gdEventsFunctionsExtension,\n    filename: string\n  ): Promise<void> => {\n    const serializedObject = serializeToJSObject(extension);\n    try {\n      await downloadStringContentAsFile(\n        filename,\n        JSON.stringify(serializedObject, null, 2)\n      );\n    } catch (error) {\n      console.error('Unable to write the events function extension:', error);\n      throw error;\n    }\n  };\n}\n","// @flow\n\nimport {\n  signInWithEmailAndPassword,\n  type Auth,\n  GoogleAuthProvider,\n  GithubAuthProvider,\n  OAuthProvider,\n  signInWithCredential,\n} from 'firebase/auth';\nimport type { LoginProvider, FirebaseBasedLoginProvider } from '.';\nimport type { IdentityProvider } from '../Utils/GDevelopServices/Authentication';\nimport {\n  setupAuthenticationWebSocket,\n  terminateWebSocket,\n} from '../Utils/GDevelopServices/Authorization';\nimport Window from '../Utils/Window';\n\nconst isDev = Window.isDev();\n\nconst authenticationPortalUrl = 'https://auth.gdevelop.io';\n\nclass BrowserLoginProvider\n  implements LoginProvider, FirebaseBasedLoginProvider {\n  auth: Auth;\n  constructor(auth: Auth) {\n    this.auth = auth;\n  }\n\n  async loginWithEmailAndPassword({\n    email,\n    password,\n  }: {|\n    email: string,\n    password: string,\n  |}) {\n    try {\n      await signInWithEmailAndPassword(this.auth, email, password);\n      // The user is now stored in `this.auth`.\n    } catch (error) {\n      console.error('Error while login:', error);\n      throw error;\n    }\n  }\n\n  async loginOrSignupWithProvider({\n    provider,\n    signal,\n  }: {|\n    provider: IdentityProvider,\n    signal?: AbortSignal,\n  |}) {\n    if (signal && signal.aborted) {\n      return Promise.reject(\n        new Error('Login or Signup with provider already aborted.')\n      );\n    }\n    const promise = new Promise((resolve, reject) => {\n      // Listen for abort event on signal\n      if (signal) {\n        signal.addEventListener('abort', () => {\n          terminateWebSocket();\n          reject(new Error('Login or Signup with provider aborted.'));\n        });\n      }\n      const width = 400;\n      const height = 600;\n      const left = window.screenX + window.innerWidth / 2 - width / 2;\n      const top = window.screenY + window.innerHeight / 2 - height / 2;\n\n      const authWindow = window.open(\n        'about:blank',\n        null,\n        `width=${width},height=${height},left=${left},top=${top}`\n      );\n      authWindow.document.write(\n        `<style>body { margin: 0; }</style><div style=\"height: 100vh; display: flex; justify-content: center; align-items: center; color: #F5F5F7; background-color: #25252E; font-family: 'Verdana', 'Fira Sans', 'Open Sans', 'Lucida Sans'; font-size: 20px\">Loading</div>`\n      );\n      setupAuthenticationWebSocket({\n        onConnectionEstablished: connectionId => {\n          if (signal && signal.aborted) return;\n          const url = new URL(authenticationPortalUrl);\n          url.searchParams.set('connection-id', connectionId);\n          url.searchParams.set('provider', provider);\n          url.searchParams.set('env', isDev ? 'dev' : 'live');\n\n          if (!authWindow) throw new Error('Popup could not be found.');\n          authWindow.location = url.toString();\n        },\n        onTokenReceived: async ({\n          provider,\n          data,\n        }: {|\n          provider: 'apple' | 'google' | 'github',\n          data: any,\n        |}) => {\n          if (signal && signal.aborted) return;\n          try {\n            const credential =\n              provider === 'google'\n                ? GoogleAuthProvider.credential(data.credential)\n                : provider === 'github'\n                ? GithubAuthProvider.credential(data.accessToken)\n                : new OAuthProvider('apple.com').credential({\n                    idToken: data.id_token,\n                    // Typescript types declaration indicates the parameter `rawNonce` should be\n                    // set but it only works with `nonce`.\n                    nonce: data.raw_nonce,\n                  });\n            await signInWithCredential(this.auth, credential);\n            if (authWindow) {\n              authWindow.close();\n            }\n            resolve();\n            terminateWebSocket();\n          } catch (error) {\n            console.error(\n              `An error occurred while logging in with ${provider} token:`,\n              error\n            );\n            reject(error);\n          }\n        },\n        onError: error => {\n          if (signal && signal.aborted) return;\n          terminateWebSocket();\n          console.error(\n            'An error occurred while setting up authentication web socket:',\n            error\n          );\n          reject(\n            new Error(\n              'An error occurred while setting up authentication web socket.'\n            )\n          );\n        },\n        onTimeout: () => {\n          if (signal && signal.aborted) return;\n          terminateWebSocket();\n          console.error('Connection to authorization websocket timed out.');\n          reject(new Error('Connection to authorization websocket timed out.'));\n        },\n      });\n    });\n    return promise;\n  }\n}\n\nexport default BrowserLoginProvider;\n","// @flow\nimport * as React from 'react';\nimport MainFrame from './MainFrame';\nimport Window from './Utils/Window';\nimport ShareDialog from './ExportAndShare/ShareDialog';\nimport Authentication from './Utils/GDevelopServices/Authentication';\nimport './UI/icomoon-font.css'; // Styles for Icomoon font.\n\n// Import for browser only IDE\nimport browserResourceSources from './ResourcesList/BrowserResourceSources';\nimport browserResourceExternalEditors from './ResourcesList/BrowserResourceExternalEditors';\nimport BrowserS3PreviewLauncher from './ExportAndShare/BrowserExporters/BrowserS3PreviewLauncher';\nimport {\n  browserAutomatedExporters,\n  browserManualExporters,\n  browserOnlineWebExporter,\n} from './ExportAndShare/BrowserExporters';\nimport makeExtensionsLoader from './JsExtensionsLoader/BrowserJsExtensionsLoader';\nimport ObjectsEditorService from './ObjectEditor/ObjectsEditorService';\nimport ObjectsRenderingService from './ObjectsRendering/ObjectsRenderingService';\nimport { makeBrowserS3EventsFunctionCodeWriter } from './EventsFunctionsExtensionsLoader/CodeWriters/BrowserS3EventsFunctionCodeWriter';\nimport Providers from './MainFrame/Providers';\nimport ProjectStorageProviders from './ProjectsStorage/ProjectStorageProviders';\nimport UrlStorageProvider from './ProjectsStorage/UrlStorageProvider';\nimport GoogleDriveStorageProvider from './ProjectsStorage/GoogleDriveStorageProvider';\nimport DownloadFileStorageProvider from './ProjectsStorage/DownloadFileStorageProvider';\nimport CloudStorageProvider from './ProjectsStorage/CloudStorageProvider';\nimport BrowserResourceMover from './ProjectsStorage/ResourceMover/BrowserResourceMover';\nimport BrowserResourceFetcher from './ProjectsStorage/ResourceFetcher/BrowserResourceFetcher';\nimport BrowserEventsFunctionsExtensionOpener from './EventsFunctionsExtensionsLoader/Storage/BrowserEventsFunctionsExtensionOpener';\nimport BrowserEventsFunctionsExtensionWriter from './EventsFunctionsExtensionsLoader/Storage/BrowserEventsFunctionsExtensionWriter';\nimport BrowserLoginProvider from './LoginProvider/BrowserLoginProvider';\n\nexport const create = (authentication: Authentication) => {\n  Window.setUpContextMenu();\n  const loginProvider = new BrowserLoginProvider(authentication.auth);\n  authentication.setLoginProvider(loginProvider);\n\n  let app = null;\n  const appArguments = Window.getArguments();\n\n  app = (\n    <Providers\n      authentication={authentication}\n      disableCheckForUpdates={!!appArguments['disable-update-check']}\n      makeEventsFunctionCodeWriter={makeBrowserS3EventsFunctionCodeWriter}\n      eventsFunctionsExtensionWriter={BrowserEventsFunctionsExtensionWriter}\n      eventsFunctionsExtensionOpener={BrowserEventsFunctionsExtensionOpener}\n    >\n      {({ i18n }) => (\n        <ProjectStorageProviders\n          appArguments={appArguments}\n          storageProviders={[\n            UrlStorageProvider,\n            CloudStorageProvider,\n            GoogleDriveStorageProvider,\n            DownloadFileStorageProvider,\n          ]}\n          defaultStorageProvider={UrlStorageProvider}\n        >\n          {({\n            getStorageProviderOperations,\n            getStorageProviderResourceOperations,\n            storageProviders,\n            initialFileMetadataToOpen,\n            getStorageProvider,\n          }) => (\n            <MainFrame\n              i18n={i18n}\n              renderPreviewLauncher={(props, ref) => (\n                <BrowserS3PreviewLauncher {...props} ref={ref} />\n              )}\n              renderShareDialog={props => (\n                <ShareDialog\n                  project={props.project}\n                  onSaveProject={props.onSaveProject}\n                  isSavingProject={props.isSavingProject}\n                  onChangeSubscription={props.onChangeSubscription}\n                  onClose={props.onClose}\n                  automatedExporters={browserAutomatedExporters}\n                  manualExporters={browserManualExporters}\n                  onlineWebExporter={browserOnlineWebExporter}\n                  allExportersRequireOnline\n                  fileMetadata={props.fileMetadata}\n                  storageProvider={props.storageProvider}\n                  initialTab={props.initialTab}\n                />\n              )}\n              quickPublishOnlineWebExporter={browserOnlineWebExporter}\n              storageProviders={storageProviders}\n              resourceMover={BrowserResourceMover}\n              resourceFetcher={BrowserResourceFetcher}\n              getStorageProviderOperations={getStorageProviderOperations}\n              getStorageProviderResourceOperations={\n                getStorageProviderResourceOperations\n              }\n              getStorageProvider={getStorageProvider}\n              resourceSources={browserResourceSources}\n              resourceExternalEditors={browserResourceExternalEditors}\n              extensionsLoader={makeExtensionsLoader({\n                objectsEditorService: ObjectsEditorService,\n                objectsRenderingService: ObjectsRenderingService,\n                filterExamples: !Window.isDev(),\n              })}\n              initialFileMetadataToOpen={initialFileMetadataToOpen}\n              initialExampleSlugToOpen={appArguments['create-from-example'] || null}\n            />\n          )}\n        </ProjectStorageProviders>\n      )}\n    </Providers>\n  );\n\n  return app;\n};\n"],"names":["ResourceStoreChooser","_ref","options","selectedResourceIndex","onSelectResource","resourceKind","resourcesKindSupportedByResourceStore","includes","_jsx","ResourceStore","UrlChooser","_ref2","onChooseResources","createNewResource","_React$useState","React","_React$useState2","_slicedToArray","inputValue","setInputValue","_React$useState3","_React$useState4","error","setError","_React$useState5","_React$useState6","urlsErroredBooleanArray","setUrlsErroredBooleanArray","hasErroredUrls","filter","Boolean","length","validateInputValue","useDebounce","_ref3","_asyncToGenerator","_regeneratorRuntime","mark","_callee2","urls","responses","wrap","_context2","prev","next","multiSelection","split","Promise","all","map","_ref4","_callee","url","_context","axios","timeout","validateStatus","status","abrupt","sent","stop","_x2","apply","arguments","response","t0","_x","_jsxs","ColumnStackLayout","noMargin","expand","children","Line","TextFieldWithButtonLayout","renderButton","style","RaisedButton","onClick","newResource","setFile","setName","path","setOrigin","primary","label","Trans","id","disabled","renderTextField","SemiControlledTextField","floatingLabelText","value","onChange","multiline","rows","rowsMax","fullWidth","errorText","values","isErrored","index","join","AlertMessage","kind","concat","_toConsumableArray","allResourceKindsAndMetadata","_ref5","name","displayName","displayTab","renderComponent","props","FileToCloudProjectResourceUploader","fileMetadata","getStorageProvider","automaticallyOpenInput","automaticallyOpenIfPossible","source","find","resourceSource","renderPrimaryAction","_ref6","resource","DialogPrimaryButton","chosenResourceUrl","resourceCleanedName","isPublicAssetResourceUrl","extractDecodedFilenameWithExtensionFromPublicAssetResourceUrl","_ref7","displayBlackLoadingScreenOrThrow","externalWindow","document","write","nextExternalEditorWindowId","externalEditorIndexHtml","piskel","yarn","jfxr","openAndWaitForExternalEditorWindow","externalEditorWindow","externalEditorName","externalEditorInput","signal","aborted","reject","UserCancellationError","resolve","externalEditorLoaded","externalEditorClosed","externalEditorOutput","onMessageEvent","event","data","_event$data","payload","console","info","addEventListener","onExternalEditorWindowClosed","postMessage","window","location","origin","close","warn","removeEventListener","setTimeout","downloadAndPrepareExternalEditorBase64Resources","_callee3","project","resourceNames","urlsToDownload","resourcesManager","downloadedBlobs","resourcesToDataUrl","_context3","getResourcesManager","forEach","resourceName","hasResource","getResource","getFile","isURL","isBlobURL","push","downloadUrlsToBlobs","urlContainers","onProgress","count","total","Map","blob","item","t1","convertBlobToDataURL","t2","t3","dataUrl","set","call","t4","_x3","resourceData","get","localFilePath","editWithBrowserExternalEditor","_ref8","_callee4","defaultName","metadataKey","resourceManagementProps","resources","modifiedResources","_context4","singleFrame","extraOptions","externalEditorData","readMetadata","existingMetadata","fps","isLooping","sendExternalEditorOpened","saveBlobUrlsFromExternalEditorBase64Resources","baseNameForNewResources","onFetchNewlyAddedResources","freeBlobsAndUpdateMetadata","metadata","patchExternalEditorMetadataWithResourcesNamesIfNecessary","_ref9","getName","_ref10","originalIndex","newName","newMetadata","_defineProperty","_x4","cloudProjectWarning","immediatelyOpenLoadingWindowForExternalEditor","targetId","left","screenX","innerWidth","width","top","screenY","innerHeight","height","open","Error","editors","createDisplayName","editDisplayName","edit","_edit","_callee5","i18n","_context5","internalName","showWarningBox","_","delayToNextTick","_x5","_edit2","_callee6","_context6","_x6","_edit3","_callee7","_context7","_x7","BrowserPreviewErrorDialog","_Component","_inherits","_super","_createSuper","_classCallCheck","_createClass","key","_this$props","this","onClose","I18n","Dialog","title","actions","FlatButton","onRequestClose","Column","Text","code","message","Component","uploadObject","params","getSignedUrl","uploadType","Key","contentType","ContentType","then","signedUrl","Body","headers","getBaseUrl","GDevelopGamePreviews","baseUrl","gd","global","filename","startsWith","BrowserS3FileSystem","_this","filesContent","prefix","bucketBaseUrl","_pendingUploadObjects","_allCopiedExternalUrls","Set","uploadPendingObjects","result","log","mkDir","dirExists","clearDir","getTempDir","fileNameFrom","fullpath","dirNameFrom","makeAbsolute","baseDirectory","isAbsolute","makeRelative","charAt","copyFile","dest","add","writeToFile","fullPath","contents","replace","fileExtension","readFile","file","_indexedFilesContent","text","readDir","ext","toUpperCase","output","VectorString","upperCaseUrl","indexOf","push_back","fileExists","textFileDescriptor","filePath","filesToDownload","preview","web","cordova","electron","findGDJS","fileSet","gdjsRoot","getIDEVersion","relativeFilePath","fetch","ok","debuggerServerState","callbacksList","nextDebuggerId","existingPreviewWindows","getExistingDebuggerIds","Object","keys","Number","getDebuggerIdForPreviewWindow","previewWindow","windowClosedPollingIntervalId","setupWindowClosedPolling","setInterval","_loop","closed","onConnectionClosed","debuggerIds","clearInterval","PREVIEWS_ORIGIN","browserPreviewDebuggerServer","startServer","_startServer","parsedMessage","JSON","parse","onHandleParsedMessage","onServerStateChanged","sendMessage","getServerState","registerCallbacks","callbacks","callbacksIndex","splice","registerNewPreviewWindow","onConnectionOpened","nextPreviewWindowId","immediatelyOpenNewPreviewWindow","getGameResolutionWidth","getGameResolutionHeight","BrowserS3PreviewLauncher","_React$Component","_len","args","Array","_key","canDoNetworkPreview","canDoHotReload","state","_prepareExporter","makeTimestampedId","outputDir","browserS3FileSystem","fileSystem","assignIn","AbstractFileSystemJS","exporter","Exporter","setCodeOutputDirectory","launchPreview","previewOptions","layout","externalLayout","numberOfWindows","lastDebuggerId","shouldHotReload","existingPreviewWindow","previewWindows","_yield$_this$_prepare","previewExportOptions","gdevelopResourceToken","setState","getPreviewDebuggerServer","hotReload","from","PreviewExportOptions","setLayoutName","setIsDevelopmentEnvironment","Window","isDev","setExternalLayoutName","isNativeMobileApp","useMinimalDebuggerClient","useWindowMessageDebuggerClient","setNonRuntimeScriptsCacheBurst","Date","now","setFullLoadingScreen","fullLoadingScreen","setNativeMobileApp","setGDevelopVersionWithHash","getIDEVersionWithHash","setCrashReportUploadLevel","crashReportUploadLevel","setPreviewContext","previewContext","setProjectTemplateSlug","getTemplateSlug","setSourceGameId","sourceGameId","fallbackAuthor","setFallbackAuthor","username","authenticatedPlayer","setAuthenticatedPlayer","playerId","playerUsername","playerToken","getGDevelopResourceJwtToken","setGDevelopResourceToken","exportProjectForPixiPreview","delete","_this2","uploadBlobFile","uploadOptions","maxContentLength","Infinity","onUploadProgress","progressEvent","loaded","pathPosix","BrowserFileSystem","textFiles","_textFiles","_filesToDownload","getAllTextFilesIn","pathPrefix","getAllUrlFilesIn","basename","dirname","filePathOrURL","baseDirectoryOrURL","normalize","substring","relative","content","upperCaseFilePath","normalizedFilePath","exportPipelineName","browserOnlineCordovaExportPipeline","onlineBuildType","limitedBuilds","packageNameWarningType","getInitialExportState","targets","keystore","signingDialogOpen","canLaunchBuild","exportState","errored","exportStep","isNavigationDisabled","renderHeader","SetupExportHeader","_objectSpread","shouldSuggestBumpingVersionNumber","renderExportFlow","ExportFlow","prepareExporter","context","abstractFileSystem","launchExport","exportOptions","ExportOptions","setTarget","exportWholePixiProject","urlFiles","launchResourcesDownload","downloadUrlFilesToBlobFiles","updateStepProgress","blobFiles","launchCompression","archiveFiles","basePath","launchUpload","blobFile","getBuildFileUploadOptions","launchOnlineBuild","authenticatedUser","uploadBucketKey","gameId","payWithCredits","getAuthorizationHeader","firebaseUser","buildCordovaAndroid","uid","browserOnlineCordovaIosExportPipeline","signing","profile","buildCordovaIos","browserOnlineElectronExportPipeline","buildElectron","browserOnlineWebExportPipeline","uiMode","ExplanationHeader","OnlineWebExportFlow","sizeLimit","buildWeb","browserHTML5ExportPipeline","renderDoneFooter","compressionOutput","DoneFooter","renderGameButton","BlobDownloadUrlHolder","blobDownloadUrl","openBlobDownloadUrl","browserCordovaExportPipeline","browserElectronExportPipeline","browserFacebookInstantGamesExportPipeline","browserOnlineWebExporter","onlineWebExporter","exportPipeline","browserAutomatedExporters","html5Exporter","onlineCordovaExporter","onlineCordovaIosExporter","onlineElectronExporter","facebookInstantGamesExporter","browserManualExporters","cordovaExporter","electronExporter","jsExtensions","extensionModule","require","objectsRenderingServiceModules","makeExtensionsLoader","objectsEditorService","objectsRenderingService","filterExamples","loadAllExtensions","registerEditorConfigurations","requirePath","registerModule","registerInstanceRenderers","registerClearCache","extensionModulePath","loadExtension","JsPlatform","makeBrowserS3EventsFunctionCodeWriter","onWriteFile","getPathFor","codeNamespace","slugs","getIncludeFileFor","writeFunctionCode","functionCodeNamespace","includeFile","writeBehaviorCode","behaviorCodeNamespace","writeObjectCode","objectCodeNamespace","SvgIcon","d","styles","container","position","display","alignItems","button","marginLeft","textField","flex","TextField","floatingLabelFixed","type","translatableHintText","onOpenPicker","selectedFileOrFolder","setSelectedFileOrFolder","newFileName","setNewFileName","saving","setSaving","_React$useState7","_React$useState8","saveError","setSaveError","_React$useState9","_React$useState10","pickerError","setPickerError","_React$useState11","_React$useState12","dialogHidden","hideDialog","canSave","save","onSave","catch","canCancel","onCancel","LeftLoader","isLoading","cannotBeDismissed","onApply","maxWidth","GoogleDriveFileOrFolderPicker","onShowFilePicker","selectFolderEnabled","showUploadView","DEVELOPER_KEY","DISCOVERY_DOCS","SCOPE","apisLoaded","apisLoadingPromise","initializeApis","loadScript","gapi","load","callback","auth2LoadPromise","auth2","init","apiKey","clientId","discoveryDocs","scope","client","setApiKey","driveLoadPromise","onerror","isAuthenticated","authenticate","googleAuth","getAuthInstance","isSignedIn","currentUser","listen","authenticated","signIn","googleUser","getAuthResponse","patchJsonFile","fileId","method","Headers","Authorization","access_token","body","res","showFilePicker","google","picker","pickerBuilder","PickerBuilder","addView","DocsView","setIncludeFolders","setSelectFolderEnabled","setOAuthToken","setDeveloperKey","setAppId","setCallback","Response","ACTION","Action","PICKED","doc","DOCUMENTS","Document","ID","NAME","parentId","PARENT_ID","TYPE","Type","LOCATION","MIME_TYPE","dispose","CANCEL","DocsUploadView","build","setVisible","pickerElements","getElementsByClassName","i","zIndex","renderIcon","GoogleDrive","fontSize","size","getFileMetadataFromAppArguments","appArguments","googleDriveState","ids","fileIdentifier","e","createOperations","setDialog","closeDialog","doesInitialOpenRequireUserInteraction","onOpen","fileContent","ex","onOpenWithPicker","googleDriveFileOrFolder","onSaveProject","newFileMetadata","lastModifiedDate","serializeToJSON","wasSaved","onChooseSaveProjectAsLocation","GoogleDriveSaveAsDialog","saveAsLocation","newFileId","drive","files","create","parents","mimeType","fields","apiResponse","onSaveProjectAs","_onSaveProjectAs","onStartSaving","onMoveResources","getOpenErrorMessage","PROJECT_JSON_FILENAME","downloadResourcesAsBlobs","onAddBlobFile","_onProgress","getResourcesToFetch","resourcesToFetchAndUpload","downloadedBlobsAndResources","alreadyUsedFilenames","erroredResources","getAllResourceNames","toJSArray","resourceFile","checkIfIsGDevelopCloudBucketUrl","extractDecodedFilenameFromProjectResourceUrl","extension","extname","getKind","newBasename","newNameGenerator","tentativeBasename","has","newResourcePath","DownloadFileSaveAsDialog","onDone","zippedProjectBlob","setZippedProjectBlob","_useGenericRetryableP","useGenericRetryableProcessWithProgress","onDoProcess","ensureProcessIsDone","renderProcessDialog","newProject","serializedProject","_zippedProjectBlob","ProjectHelper","createNewGDJSProject","SerializerElement","serializeTo","unserializeFrom","blobFileDescriptor","stringify","serializeToJSObject","showErrorBox","rawError","errorId","finish","openExternalURL","justifyContent","PlaceholderLoader","Download","hiddenInOpenDialog","moveNothing","movers","_movers","CloudStorageProvider","moveUrlResourcesToCloudProject","UrlStorageProvider","GoogleDriveStorageProvider","ensureNoCloudProjectResources","DownloadFileStorageProvider","BrowserResourceMover","moveAllProjectResources","_moveAllProjectResources","oldStorageProvider","newStorageProvider","mover","fetchNothing","fetchers","_fetchers","moveUrlResourcesToCloudFilesIfPrivate","fetchRelativeResourcesToFullUrls","BrowserResourceFetcher","fetchAllProjectResources","_fetchAllProjectResources","storageProvider","fetcher","BrowserEventsFunctionsExtensionOpener","chooseEventsFunctionExtensionFile","showOpenFilePicker","types","description","accept","excludeAcceptAllOption","multiple","handle","adhocInput","createElement","onchange","target","onFilePickingDialogFinishedClosing","onFocusBackWindow","click","readEventsFunctionExtensionFile","File","downloadStringContentAsFile","blobUrl","adhocLink","Blob","URL","createObjectURL","href","download","appendChild","remove","BrowserEventsFunctionsExtensionWriter","extensionName","writeEventsFunctionsExtension","serializedObject","BrowserLoginProvider","auth","_loginWithEmailAndPassword","email","password","signInWithEmailAndPassword","_loginOrSignupWithProvider","provider","promise","terminateWebSocket","authWindow","setupAuthenticationWebSocket","onConnectionEstablished","connectionId","searchParams","toString","onTokenReceived","_onTokenReceived","credential","GoogleAuthProvider","GithubAuthProvider","accessToken","OAuthProvider","idToken","id_token","nonce","raw_nonce","signInWithCredential","onError","onTimeout","authentication","setUpContextMenu","loginProvider","setLoginProvider","getArguments","Providers","disableCheckForUpdates","makeEventsFunctionCodeWriter","eventsFunctionsExtensionWriter","eventsFunctionsExtensionOpener","ProjectStorageProviders","storageProviders","defaultStorageProvider","getStorageProviderOperations","getStorageProviderResourceOperations","initialFileMetadataToOpen","MainFrame","renderPreviewLauncher","ref","renderShareDialog","ShareDialog","isSavingProject","onChangeSubscription","automatedExporters","manualExporters","allExportersRequireOnline","initialTab","quickPublishOnlineWebExporter","resourceMover","resourceFetcher","resourceSources","browserResourceSources","resourceExternalEditors","browserResourceExternalEditors","extensionsLoader","ObjectsEditorService","ObjectsRenderingService","initialExampleSlugToOpen"],"sourceRoot":""}